# 🍬 Candy Crush Game | 糖果粉碎

经典的三消益智游戏！交换糖果，消除相同颜色，挑战高分！

## 📖 游戏简介

Candy Crush 是一款风靡全球的三消益智游戏。玩家通过拖拽交换相邻糖果，将3个或以上相同颜色的糖果排成一行或一列即可消除。消除后上方的糖果会自动下落填充空位，新的糖果从顶部生成。游戏提供两种模式：无尽模式和限时挑战，满足不同玩家的需求！

### 游戏特色
- **双模式**：无尽模式 + 限时模式（2分钟）
- **经典三消**：3/4/5 连消机制
- **智能填充**：糖果自动下落和补充
- **拖拽交换**：流畅的拖放操作
- **精美糖果**：6种彩色糖果图片
- **动画效果**：消除动画、得分动画
- **粒子背景**：浮动粒子装饰
- **响应式设计**：完美适配各种设备

## 🎮 游戏玩法

### 基本操作

- **拖拽交换**：按住糖果拖动到相邻位置交换
- **有效移动**：只能与上下左右相邻的糖果交换
- **必须消除**：交换后必须形成3个以上连线，否则自动复原

### 游戏模式

#### 🌟 无尽模式（Endless Mode）
- **特点**：无时间限制
- **目标**：尽情享受，追求高分
- **适合**：休闲玩家，享受消除乐趣
- **图标**：♾️ 无限符号

#### ⏰ 限时模式（Timed Mode）
- **特点**：2分钟倒计时
- **目标**：挑战极限，快速得分
- **适合**：竞技玩家，追求刺激
- **图标**：🕐 时钟符号
- **倒计时**：剩余30秒时红色警告

### 游戏规则

#### 消除条件
- **横向消除**：同一行3个或以上相同颜色糖果
- **纵向消除**：同一列3个或以上相同颜色糖果
- **优先级**：5连 > 4连 > 3连

#### 计分系统
| 消除数量 | 得分 |
|---------|------|
| 3个相同 | 3分 |
| 4个相同 | 4分 |
| 5个相同 | 5分 |

**得分动画**：分数增加时会有缩放动画效果

#### 糖果类型
游戏共有 **6种糖果**（不同颜色）：
1. 🔴 红色糖果
2. 🔵 蓝色糖果
3. 🟢 绿色糖果
4. 🟡 黄色糖果
5. 🟠 橙色糖果
6. 🟣 紫色糖果

#### 填充机制
1. **消除**：匹配的糖果消失
2. **下落**：上方糖果自动下落填充空位
3. **生成**：顶部随机生成新糖果
4. **连锁**：下落后可能形成新的匹配（自动继续消除）

### 游戏流程

1. **选择模式**：
   - 点击"无尽模式"或"限时模式"
   - 进入游戏界面

2. **开始游戏**：
   - 8×8 网格自动生成糖果
   - 开始拖拽交换

3. **消除糖果**：
   - 拖拽相邻糖果交换位置
   - 形成3+连线自动消除
   - 观察糖果下落

4. **持续游戏**：
   - 无尽模式：一直玩到无法消除
   - 限时模式：倒计时结束

5. **游戏结束**：
   - 限时模式时间到
   - 查看最终得分
   - 选择"再玩一次"或"返回菜单"

## 🖥️ 界面说明

### 模式选择界面
全屏遮罩，深色半透明背景：

**主要元素**：
- **游戏标题**：🍬 Candy Crush Game（大号字体，跳动动画）
- **副标题**："选择游戏模式"
- **两个模式按钮**：
  - ♾️ 无尽模式（蓝色渐变）
    - "尽情享受，无时间限制"
  - 🕐 限时模式（橙黄渐变）
    - "挑战2分钟极限"

**按钮效果**：
- 悬停：上浮 5px + 放大 1.05 倍
- 点击：轻微缩放

### 游戏界面

#### 计分板（左侧/上方）
白色半透明卡片，毛玻璃效果：

**得分区域**：
- 标签："⭐ 得分"（金色星星）
- 数值：大号显示（3.5rem字体）
- 动画：得分时放大缩小

**计时器区域**（仅限时模式）：
- 图标：🕐 时钟
- 格式："剩余时间: M:SS"
- 颜色：
  - 正常：白色
  - ≤30秒：红色警告

**控制按钮**：
1. **🔄 切换模式**：返回模式选择
2. **🔁 重新开始**：重置当前游戏（粉色渐变）

#### 游戏网格
白色半透明卡片，深色内部：

**网格尺寸**：
- 桌面：8×8 网格，每格 70×70 像素
- 平板：8×8 网格，每格 50×50 像素
- 手机：8×8 网格，每格 40×40 像素

**糖果元素**：
- 背景图片：外部 URL 加载糖果图片
- 圆角：10px
- 阴影：0 3px 10px
- 鼠标样式：抓取（grab）

**交互效果**：
- 悬停：放大 1.1 倍 + 白色发光
- 拖拽中：半透明（opacity: 0.5）
- 释放：恢复正常
- 被拖拽目标：半透明（opacity: 0.7）

### 游戏结束模态框
半透明黑色遮罩 + 白色卡片：

**主要内容**：
- **图标**：🏆 奖杯（金色，跳动动画）
- **标题**："游戏结束！"
- **得分显示**：
  - 文字："你的得分："
  - 数值：紫色大号数字（2.5rem）
- **按钮组**：
  - ▶️ 再玩一次（紫色渐变）
  - 🏠 返回菜单（灰色）

### 背景装饰
5个浮动粒子：
- 白色半透明圆点
- 不同位置和延迟
- 浮动动画（12-20秒循环）
- 位移 + 缩放 + 透明度变化

## 🎨 视觉效果

### 配色方案
- **主渐变**：紫蓝色（#667eea → #764ba2）
- **次渐变**：粉红色（#f093fb → #f5576c）
- **成功渐变**：蓝色（#4facfe → #00f2fe）
- **警告渐变**：橙黄色（#fa709a → #fee140）
- **背景**：三色渐变（#667eea → #764ba2 → #f093fb）
- **卡片**：白色半透明 + 毛玻璃效果

### 动画效果

1. **粒子浮动**：5个粒子不同速度循环移动（12-20秒）
2. **标题跳动**：上下跳动（2秒循环）
3. **模式按钮**：悬停上浮 + 放大
4. **糖果悬停**：放大 1.1 倍 + 白色发光
5. **得分动画**：缩放 1.2 倍后恢复
6. **消除动画**：糖果缩放 1.2 倍
7. **模态框**：弹出缩放动画（0.4秒）
8. **界面切换**：淡入淡出（0.5秒）

### 特殊效果
- **毛玻璃**：backdrop-filter: blur(20px)
- **渐变文字**：标题使用渐变背景
- **阴影层次**：多级阴影（lg/md）
- **平滑过渡**：cubic-bezier(0.4, 0, 0.2, 1)

## 📱 响应式支持

### 桌面设备（> 768px）
- 网格：8×8，70×70 像素
- 计分板：左侧独立卡片
- 完整按钮文字

### 平板设备（≤ 768px）
- 网格：8×8，50×50 像素
- 游戏界面：垂直布局
- 计分板：顶部显示

### 手机设备（≤ 480px）
- 网格：8×8，40×40 像素
- 标题字体：缩小到 2rem
- 模式按钮：垂直排列，最小宽度 200px

## 🚀 快速开始

### 运行游戏
1. 在浏览器中打开 `index.html`
2. 选择游戏模式（无尽或限时）
3. 拖拽糖果开始游戏！

### 依赖资源（外部 CDN）
- **Google Fonts**：
  - Poppins（主字体）
  - Fredoka One（标题字体）
- **Font Awesome 6.4.0**：图标库
- **糖果图片**：GitHub 外部 URL（6张）

### 浏览器要求
- ✅ 支持 ES6 语法
- ✅ 支持 CSS Grid & Flexbox
- ✅ 支持拖拽 API（Drag & Drop）
- ✅ 支持 CSS backdrop-filter
- ✅ Chrome / Edge（推荐）
- ✅ Firefox
- ✅ Safari
- ⚠️ 需要网络连接（加载外部资源）

## 💡 游戏技巧

### 新手技巧
1. **观察全局**：查看整个棋盘，寻找可能的消除
2. **优先长链**：优先消除4个或5个连线
3. **创造机会**：有时需要设置几步才能消除
4. **无效不换**：记住无效交换会自动复原
5. **从底部开始**：底部糖果移动会影响上方

### 进阶技巧
1. **连锁反应**：利用糖果下落创造连锁消除
2. **角落优先**：角落和边缘容易形成消除
3. **颜色平衡**：注意棋盘上颜色分布
4. **预判下落**：预测糖果下落后的排列
5. **快速扫描**：快速识别可消除组合

### 限时模式技巧
1. **速度优先**：快速连续消除，不要犹豫
2. **简单为主**：优先消除简单的3连
3. **避免死局**：不要陷入无法消除的局面
4. **时间管理**：注意倒计时，最后冲刺
5. **连续操作**：保持手的连续移动

## 🏆 挑战目标

### 无尽模式
- 🥉 **新手**：达到 50 分
- 🥈 **入门**：达到 100 分
- 🥇 **熟练**：达到 200 分
- 💎 **高手**：达到 500 分
- 👑 **大师**：达到 1000 分
- 🌟 **传奇**：达到 2000+ 分

### 限时模式（2分钟）
- 🥉 **入门**：达到 30 分
- 🥈 **进阶**：达到 60 分
- 🥇 **熟练**：达到 100 分
- 💎 **高手**：达到 150 分
- 👑 **大师**：达到 200 分
- 🌟 **极限**：达到 300+ 分

## 📄 文件结构

```
Candy-Crush/
├── index.html          # 游戏主页面
├── style.css           # 样式表（UI设计、动画）
├── script.js           # 游戏逻辑（消除、计分）
└── README.md           # 本文档
```

## 🔧 技术细节

### 核心参数
```javascript
GRID_WIDTH: 8 （8×8网格）
GAME_LOOP_SPEED: 100ms （游戏循环间隔）
TIMED_MODE_DURATION: 120秒 （限时模式时长）

得分：
  3个相同: 3分
  4个相同: 4分
  5个相同: 5分
```

### 糖果图片
使用外部 GitHub URL 加载：
```
红色、蓝色、绿色、黄色、橙色、紫色
共6种糖果图片
```

### 拖拽机制
使用 HTML5 Drag & Drop API：
- dragstart：记录被拖拽糖果
- dragover/dragenter/dragleave：视觉反馈
- drop：交换糖果
- dragend：验证有效性

### 有效移动检测
```javascript
只允许交换相邻糖果（上下左右）：
- 左：squareId - 1 （非左边界）
- 右：squareId + 1 （非右边界）
- 上：squareId - 8
- 下：squareId + 8
```

### 消除检测算法
优先级顺序：
1. 检测行5连
2. 检测列5连
3. 检测行4连
4. 检测列4连
5. 检测行3连
6. 检测列3连

### 游戏循环
每 100ms 执行一次：
1. 检测所有可能的消除
2. 糖果下落填充
3. 顶部生成新糖果

## 🐛 反馈与支持

### 常见问题

**Q: 为什么交换后又换回来了？**  
A: 交换必须形成3个或以上连线才有效，无效交换会自动复原。

**Q: 可以斜着消除吗？**  
A: 不可以。只能横向或纵向排成一行/列才能消除。

**Q: 糖果是怎么补充的？**  
A: 消除后上方糖果自动下落，顶部随机生成新糖果。

**Q: 限时模式多长时间？**  
A: 2分钟（120秒），剩余30秒时会变红色警告。

**Q: 可以暂停游戏吗？**  
A: 可以点击"切换模式"返回菜单（相当于暂停），但限时模式不会暂停计时。

**Q: 糖果图片加载不出来怎么办？**  
A: 糖果图片来自外部 URL，需要网络连接。请检查网络或等待加载。

**Q: 可以撤销操作吗？**  
A: 不可以。游戏不支持撤销功能。

**Q: 为什么有时候没有可消除的糖果？**  
A: 游戏是随机生成的，偶尔会出现暂时无法消除的情况。尝试寻找其他可能性。

### 已知限制
- 依赖外部图片 URL（需要网络）
- 无撤销功能
- 无提示功能
- 无保存进度
- 限时模式无暂停
- 无音效和背景音乐
- 无本地存储最高分

### 性能优化建议
- 使用现代浏览器
- 确保网络连接稳定（加载图片）
- 关闭不必要的浏览器标签

### 未来改进方向
- 🔊 添加音效（消除、移动、得分）
- 🎵 添加背景音乐
- 💡 添加提示系统
- 💾 保存最高分（localStorage）
- 🎯 目标任务系统
- 🎁 道具系统（炸弹、彩虹糖等）
- ⏸️ 限时模式暂停功能
- 📊 详细统计数据
- 🏅 成就系统
- 🌟 特殊糖果（条纹糖、包装糖）
- 📱 触摸屏优化
- 🎨 更多糖果皮肤

---

**准备好消除糖果了吗？开始甜蜜的旅程吧！** 🍬💫✨
