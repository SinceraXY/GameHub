# 🟡 PAC-MAN | 经典吃豆人游戏

经典街机游戏重现！收集所有豆子，躲避四个性格各异的幽灵，挑战最高分！

## 📖 游戏简介

PAC-MAN（吃豆人）是1980年诞生的经典街机游戏，风靡全球数十年。玩家控制黄色的吃豆人在迷宫中移动，收集所有豆子以通关。迷宫中有四个性格各异的幽灵会不断追击玩家，增加游戏难度。通过收集能量豆，吃豆人可以短暂反击幽灵。本游戏完美还原经典玩法，支持键盘和移动端触摸控制，带来原汁原味的街机体验！

### 游戏特色
- **经典迷宫**：28×31网格经典布局
- **四个幽灵**：每个幽灵有独特AI行为
- **能量反击**：吃能量豆后可反击幽灵
- **关卡递进**：每关难度逐渐提升
- **多种操作**：键盘方向键/WASD/移动端触摸
- **音效反馈**：Web Audio API 生成音效
- **本地存储**：保存最高分记录
- **响应式设计**：完美适配各种设备

## 🎮 游戏玩法

### 基本操作

**键盘控制**：
- **方向键**：`↑` `↓` `←` `→` 控制移动
- **WASD**：`W` `A` `S` `D` 控制移动
- **P键**：暂停/继续游戏

**移动端控制**：
- **触摸方向键**：屏幕下方的方向按钮
- 支持上下左右四个方向

### 游戏规则

#### 核心目标
- **收集豆子**：吃掉迷宫中所有豆子通关
- **躲避幽灵**：避开追击的幽灵
- **能量反击**：吃能量豆后可以吃掉幽灵
- **生存通关**：用3条生命挑战最高分

#### 计分系统

| 项目 | 得分 | 说明 |
|------|------|------|
| ⚪ 普通豆子 | +10 分 | 迷宫中的小豆子 |
| 🔵 能量豆子 | +50 分 | 四个角落的大豆子 |
| 👻 吃掉幽灵 | +200 分 | 能量状态下吃掉幽灵 |
| 🎯 清空关卡 | +500 分 | 收集完所有豆子通关奖励 |

#### 生命系统
- **初始生命**：3条（❤️❤️❤️）
- **失去生命**：被幽灵碰到
- **生命耗尽**：游戏结束
- **重生机制**：失去生命后重置位置，有2秒保护时间

#### 能量豆机制
- **位置**：迷宫四个角落（🔵）
- **效果**：短暂时间内可以吃掉幽灵
- **持续时间**：300帧（约5秒）
- **视觉反馈**：
  - 幽灵变成蓝色
  - 剩余60帧时开始闪烁（蓝白交替）
- **幽灵重生**：被吃掉的幽灵回到中央重生点

#### 四大幽灵

每个幽灵都有独特的追踪策略和性格：

**🔴 Blinky（追击者）**
- **颜色**：红色（#FF0000）
- **性格**：aggressive（激进）
- **策略**：直接追踪吃豆人当前位置
- **特点**：最直接的威胁，总是朝你移动

**🩷 Pinky（伏击者）**
- **颜色**：粉色（#FFB8FF）
- **性格**：ambusher（伏击）
- **策略**：预测吃豆人前方4格位置
- **特点**：试图拦截你的前进路线

**🩵 Inky（变化者）**
- **颜色**：青色（#00FFFF）
- **性格**：unpredictable（难以预测）
- **策略**：基于Blinky和吃豆人的位置计算目标
- **特点**：行动最难预测，经常出其不意

**🟠 Clyde（游荡者）**
- **颜色**：橙色（#FFB852）
- **性格**：patrol（巡逻）
- **策略**：距离远时追踪，距离近（<8格）时逃离到左下角
- **特点**：时近时远，难以捉摸

#### 幽灵AI行为
- **路径选择**：使用距离最优算法
- **避免回头**：不会直接反向移动
- **逃跑模式**：能量状态下远离吃豆人
- **平滑移动**：像素级平滑移动和转向
- **防抖动**：至少8帧才能改变方向

#### 关卡递进
- **初始速度**：
  - 吃豆人：0.7 像素/帧
  - 幽灵：0.6 像素/帧
- **速度递增**：每关：
  - 吃豆人：+0.05（上限1.0）
  - 幽灵：+0.08（上限1.1）
- **通关奖励**：500分
- **关卡显示**：屏幕中央显示"LEVEL X START!"

#### 特殊机制
- **边界传送**：左右边界可以穿越传送
- **平滑转向**：提前按键即可在接近路口时转向
- **碰撞检测**：0.8倍tile大小的碰撞范围
- **重生保护**：失去生命后120帧（2秒）保护时间

### 游戏流程

1. **开始游戏**：
   - 点击"开始游戏"按钮
   - 吃豆人和幽灵出现在起始位置

2. **收集豆子**：
   - 移动吃豆人收集迷宫中的豆子
   - 普通豆子+10分
   - 能量豆子+50分

3. **躲避幽灵**：
   - 观察四个幽灵的移动模式
   - 利用迷宫结构躲避追击
   - 保持安全距离

4. **能量反击**：
   - 吃掉能量豆进入能量状态
   - 幽灵变蓝，可以吃掉它们
   - 每只幽灵+200分
   - 5秒后恢复正常

5. **通关升级**：
   - 收集完所有豆子
   - 获得500分通关奖励
   - 进入下一关，速度提升

6. **游戏结束**：
   - 生命耗尽
   - 显示统计数据
   - 查看是否破纪录

## 🖥️ 界面说明

### 游戏头部
- **游戏标题**：🟡 PAC-MAN（金黄色渐变）
- **副标题**：经典街机游戏 - 收集豆子，躲避幽灵，挑战极限！

### 信息栏
5个统计卡片（不同颜色主题）：

1. **🎯 SCORE**（青色）：
   - 当前总分
   - 实时更新

2. **🎮 LEVEL**（红色）：
   - 当前关卡数
   - 从1开始

3. **❤️ LIVES**（金色）：
   - 剩余生命数
   - 显示为●符号（3个=3条命）

4. **⚪ DOTS**（白色）：
   - 剩余豆子数
   - 包括普通豆和能量豆

5. **🏆 HIGH**（绿色）：
   - 历史最高分
   - 保存在本地

### 游戏画布
**尺寸**：560×620 像素（28×31网格）

**视觉元素**：
- **墙壁**：蓝色方块（#2121DE）+ 浅蓝边框
- **普通豆子**：橙黄色小点（半径2px）
- **能量豆子**：橙黄色大点（半径5px）+ 白色高光
- **吃豆人**：
  - 黄色圆形（#FFFF00）
  - 嘴巴开合动画
  - 根据移动方向旋转
- **幽灵**：
  - 半圆头部 + 波浪形底部
  - 白色眼睛 + 黑色瞳孔
  - 能量状态：蓝色 + 交叉符号
  - 闪烁警告：蓝白交替

### 开始界面
全屏覆盖层（深色半透明）：

**主要内容**：
- **图标**：🟡（跳动动画）
- **标题**："PAC-MAN"（金黄渐变）
- **副标题**："准备好开始经典街机冒险了吗？"
- **提示**："收集所有豆子，躲避幽灵！"
- **开始按钮**："🎮 开始游戏"（青色渐变）

### 暂停界面
全屏覆盖层：

**主要内容**：
- **图标**：⏸️
- **标题**："PAUSED"
- **副标题**："游戏已暂停"
- **控制按钮**：
  - ▶️ 继续游戏（绿色渐变）
  - 🏠 返回主菜单（红色渐变）
- **快捷提示**："按 P 键快速继续"

### 控制按钮区
3个按钮（深色卡片）：

1. **⏸️ 暂停**：暂停/继续游戏
2. **🔄 重新开始**：重置当前游戏
3. **🔊 音效**：开关音效（点击变为🔇）

### 移动端方向控制
**显示条件**：移动设备（≤768px）

**布局**：
- 上方：⬆️ 按钮
- 下方：⬅️ ⬇️ ➡️ 三个按钮

**样式**：
- 70×70 像素按钮
- 青色渐变背景
- 按下时缩放效果

### 游戏说明区
**标题**："📖 GAME RULES"

**4个基础规则卡片**（4列网格）：
1. **🎮 操作控制**：使用方向键或WASD移动
2. **⚪ 收集豆子**：吃掉所有小豆子得分
3. **🔵 能量豆子**：吃大豆子可短暂反击幽灵
4. **👻 躲避幽灵**：避开四个幽灵追击

**4个幽灵介绍卡片**（4列网格）：
- 🔴 Blinky（追击者）：直接追踪你的位置
- 🩷 Pinky（伏击者）：预测你的前方位置
- 🩵 Inky（变化者）：行动难以预测
- 🟠 Clyde（游荡者）：时近时远难以捉摸

**评分规则表**（金色背景）：
- ⚪ 普通豆子 = +10 分
- 🔵 能量豆子 = +50 分
- 👻 吃掉幽灵 = +200 分
- 🎯 清空关卡 = +500 分（高亮显示）

### 游戏结束模态框
半透明黑色遮罩 + 主卡片：

**常规结束**：
- 图标：👻（摇晃动画）
- 标题："GAME OVER"
- 副标题："游戏结束"

**新纪录**：
- 图标：🏆
- 标题："NEW RECORD!"
- 副标题："恭喜！新记录！"

**统计数据**（2×2网格+1行）：
1. 🎯 FINAL SCORE：最终得分
2. 🎮 LEVEL REACHED：到达关卡
3. 👻 GHOSTS EATEN：吃掉幽灵数
4. ⚪ DOTS COLLECTED：收集豆子数
5. 🏆 NEW HIGH SCORE：新最高分（仅新纪录时显示）

**按钮**：
- 🔄 再玩一次（青色渐变）
- 🏠 返回主菜单（灰色半透明）

## 🎨 视觉效果

### 配色方案
- **主色调**：青色（#00d4ff）
- **次色调**：红色（#ff6b6b）
- **强调色**：金黄（#ffd700）
- **成功色**：绿色（#4caf50）
- **吃豆人**：黄色（#ffff00）
- **背景**：深蓝渐变（#0a0e27 → #1a1f3a）
- **迷宫墙壁**：蓝色（#2121DE）

### 动画效果

1. **页面淡入**：整个容器淡入下滑（0.5秒）
2. **图标跳动**：开始界面图标上下跳动（1秒循环）
3. **嘴巴动画**：吃豆人嘴巴开合
4. **幽灵漂浮**：幽灵介绍卡片浮动（2秒循环）
5. **能量闪烁**：剩余60帧时蓝白闪烁
6. **结束图标**：摇晃旋转（2秒循环）
7. **关卡提示**：淡入淡出显示（120帧）
8. **按钮悬停**：上浮3px + 阴影增强
9. **卡片悬停**：上浮效果 + 边框变色
10. **分数更新**：数值变化时轻微缩放

### 特殊效果
- **渐变文字**：标题使用渐变色裁剪
- **发光效果**：文字和数值使用text-shadow发光
- **毛玻璃**：遮罩层使用backdrop-filter模糊
- **平滑移动**：像素级平滑移动
- **方向旋转**：吃豆人根据移动方向旋转

## 📱 响应式支持

### 桌面设备（> 768px）
- 信息栏：5列网格
- 画布高度：600px
- 说明卡片：4列网格
- 隐藏移动端方向键

### 平板设备（≤ 768px）
- 信息栏：2×3网格（2列）
- 画布高度：450px
- 说明卡片：2列网格
- 显示移动端方向键
- 统计数据：单列布局

### 手机设备（≤ 480px）
- 标题字体：缩小到1.8rem
- 画布高度：350px
- 卡片内边距：缩小
- 所有按钮：响应式布局

## 🚀 快速开始

### 运行游戏
1. 在浏览器中打开 `index.html`
2. 点击"开始游戏"
3. 使用方向键或WASD控制吃豆人！

### 无需依赖
- ✅ 纯原生 HTML/CSS/JavaScript
- ✅ Canvas 2D 渲染
- ✅ Web Audio API 音效
- ✅ 无需外部库
- ✅ 支持离线游戏

### 浏览器要求
- ✅ 支持 Canvas API
- ✅ 支持 ES6 语法
- ✅ 支持 Web Audio API
- ✅ 支持 localStorage
- ✅ Chrome / Edge（推荐）
- ✅ Firefox
- ✅ Safari

## 💡 游戏技巧

### 新手技巧
1. **认识幽灵**：了解每个幽灵的追踪模式
2. **保持距离**：不要让幽灵靠得太近
3. **利用转角**：在转角处突然转向甩开幽灵
4. **优先级**：先清理安全区域的豆子
5. **能量时机**：在幽灵聚集时使用能量豆

### 进阶技巧
1. **预判路线**：预判Pinky的伏击位置
2. **利用Clyde**：靠近Clyde让它逃跑
3. **诱导聚集**：让幽灵聚在一起，用能量豆一网打尽
4. **清理策略**：从外围向中心清理豆子
5. **边界穿越**：利用左右边界快速逃脱

### 高手技巧
1. **Blinky陷阱**：利用Blinky的直线追踪引导它
2. **Inky预测**：观察Blinky位置预测Inky行为
3. **完美时机**：在幽灵最接近时吃能量豆
4. **清理路线**：规划最优的豆子收集路线
5. **连续吃灵**：能量状态下吃掉多个幽灵
6. **极限躲避**：在最后一刻转向避开幽灵

### 高分策略
1. **吃灵优先**：能量状态尽可能多吃幽灵（每只200分）
2. **完美通关**：不失一命通关获得更多机会
3. **速度适应**：提前适应关卡速度提升
4. **豆子规划**：留下能量豆作为紧急逃生
5. **耐心等待**：等待合适时机再行动

## 🏆 挑战目标

### 分数挑战
- 🥉 **新手**：达到 5,000 分
- 🥈 **入门**：达到 10,000 分
- 🥇 **熟练**：达到 20,000 分
- 💎 **高手**：达到 50,000 分
- 👑 **大师**：达到 100,000 分
- 🌟 **传奇**：达到 200,000+ 分

### 关卡挑战
- 🎮 **起步者**：到达第 5 关
- 🔥 **坚持者**：到达第 10 关
- ⚡ **挑战者**：到达第 20 关
- 💪 **征服者**：到达第 30 关
- 🏅 **不屈者**：到达第 50 关

### 技巧挑战
- 👻 **幽灵杀手**：单局吃掉 20+ 个幽灵
- 💯 **完美主义**：单关不失一命通关
- 🎯 **收集大师**：单关收集所有豆子
- ⚡ **速度之王**：在2.0倍速下通关

### 极限挑战
- 🔥 **连续通关**：连续通过 5 关不死
- 💎 **满分大师**：单关得分 5,000+
- 🌟 **全能王者**：所有幽灵各吃掉 50+

## 📄 文件结构

```
Pac-Man/
├── index.html          # 游戏主页面
├── style.css           # 样式表（UI设计、动画）
├── script.js           # 游戏逻辑（AI、物理）
└── README.md           # 本文档
```

## 🔧 技术细节

### 核心参数
```javascript
迷宫尺寸: 28×31 格子
格子大小: 20×20 像素
画布尺寸: 560×620 像素

初始速度:
  吃豆人: 0.7 像素/帧
  幽灵: 0.6 像素/帧

速度上限:
  吃豆人: 1.0 像素/帧
  幽灵: 1.1 像素/帧

能量持续时间: 300 帧（5秒）
重生保护时间: 120 帧（2秒）
```

### 迷宫布局
```
0 = 空地（可通行）
1 = 墙壁（不可通行）
2 = 普通豆子（10分）
3 = 能量豆子（50分）

迷宫包含：
- 普通豆子：约240个
- 能量豆子：4个（四个角落）
- 幽灵重生点：中央区域
```

### 移动系统
- **平滑移动**：像素级连续移动
- **转向机制**：接近路口中心时可转向
- **对齐系统**：转向时对齐到格子中心
- **边界传送**：左右边界无缝穿越
- **碰撞检测**：0.8倍tile大小

### 幽灵AI算法
```javascript
每个幽灵：
1. 根据性格选择目标位置
2. 计算所有可行方向
3. 不能直接回头
4. 选择距离目标最近的方向
5. 给当前方向轻微优势（-0.5）
6. 至少8帧才能改变方向

逃跑模式:
- 选择远离吃豆人的方向
- 使用相同的寻路算法
```

### 音效系统
使用 Web Audio API 生成6种音效：
- **dot**：500Hz正弦波（0.05秒）
- **powerUp**：200→700Hz上升音阶（0.3秒）
- **eatGhost**：800→200Hz下降（0.2秒）
- **death**：400→100Hz下降（0.5秒）
- **levelUp**：523Hz方波（0.5秒）
- **gameOver**：300→50Hz锯齿波（0.5秒）

### 本地存储
```javascript
存储键: 'pacmanHighScore'
存储值: 整数（最高分）
保存时机: 游戏结束且打破纪录
加载时机: 页面加载时
```

## 🐛 反馈与支持

### 常见问题

**Q: 为什么有时候转不了弯？**  
A: 需要在接近路口中心时按方向键。提前按键会在到达路口时自动转向。

**Q: 能量豆效果能持续多久？**  
A: 300帧，约5秒。剩余60帧时幽灵会开始闪烁提醒。

**Q: 幽灵的AI是怎样的？**  
A: 每个幽灵有不同策略：Blinky直接追踪，Pinky预测前方，Inky难以预测，Clyde时近时远。

**Q: 关卡难度如何提升？**  
A: 每关吃豆人速度+0.05，幽灵速度+0.08，直到达到上限。

**Q: 可以暂停游戏吗？**  
A: 可以，点击暂停按钮或按P键。

**Q: 左右边界可以穿越吗？**  
A: 可以。走到左边界会从右边出现，反之亦然。

**Q: 失去生命后会怎样？**  
A: 吃豆人和幽灵重置位置，有2秒保护时间（"GET READY!"提示）。

**Q: 吃掉的幽灵会怎样？**  
A: 幽灵回到中央重生点，失去frightened状态。

**Q: 最高分会保存吗？**  
A: 会的，保存在浏览器localStorage中，除非清除浏览器数据。

**Q: 移动端如何操作？**  
A: 使用屏幕下方的触摸方向键（⬆️ ⬅️ ⬇️ ➡️）。

### 已知限制
- 无多人模式
- 无自定义迷宫
- 无角色皮肤
- 无在线排行榜
- 音效无法自定义
- 移动端操作略逊于键盘

### 性能优化建议
- 使用现代浏览器
- 关闭不必要的浏览器标签
- 确保硬件加速已启用
- 避免在低性能设备上长时间游戏

### 未来改进方向
- 🎨 多种主题皮肤
- 🎯 自定义迷宫编辑器
- 🏅 成就系统
- 📊 详细统计图表
- 🌐 在线排行榜
- 💾 进度保存
- 🎵 经典背景音乐
- 🎮 双人合作模式
- 🌍 多种迷宫布局
- 📱 触摸屏优化（滑动控制）
- 🔊 自定义音效
- 🎁 道具系统（加速、减速、隐身）

---

**准备好重温经典了吗？开始你的吃豆人冒险吧！** 🟡👻✨
