# 🎮 Tetris | 俄罗斯方块

经典益智游戏！旋转、移动、消除，挑战你的空间思维和反应能力！

## 📖 游戏简介

Tetris（俄罗斯方块）是1984年诞生的经典益智游戏，风靡全球数十年。玩家通过旋转和移动不断下落的方块，填满横向的行以消除它们。游戏简单易学却极具挑战性，随着关卡提升，方块下落速度不断加快。本游戏采用现代化设计，支持完整的操作控制、关卡递进、分数系统和时间记录，带来流畅的游戏体验！

### 游戏特色
- **7种经典方块**：T、I、L、J、S、Z、O全套方块
- **流畅操作**：支持旋转、移动、软降、硬降
- **关卡递进**：每10行升级，速度逐渐加快
- **分数系统**：多行消除获得额外奖励
- **Next预览**：提前查看下一个方块
- **时间记录**：实时计时，暂停不计时
- **现代界面**：渐变色方块 + 发光效果
- **响应式设计**：完美适配各种设备

## 🎮 游戏玩法

### 基本操作

**键盘控制**：
- **← → 方向键**：左右移动方块
- **↑ 方向键**：旋转方块（90度顺时针）
- **↓ 方向键**：软下降（加速下落）
- **空格键**：硬下降（瞬间落地）
- **ESC键**：暂停/继续游戏

**按钮控制**：
- **Start Game**：开始新游戏
- **Pause**：暂停游戏（暂停后变为Resume）
- **Restart**：重新开始游戏
- **Rules**：查看游戏规则

### 游戏规则

#### 核心目标
- **填满横行**：将方块排列填满完整的横向一行
- **消除得分**：填满的行会消除并获得分数
- **持续生存**：不让方块堆到顶部
- **挑战高分**：追求更高的分数和关卡

#### 失败条件
- **方块到顶**：新方块无法在顶部生成时游戏结束

#### 方块类型

游戏包含7种经典方块（Tetriminos）：

| 方块 | 名称 | 形状 | 颜色 |
|------|------|------|------|
| T | T型 | ⊤ | 紫色（#a855f7 → #7c3aed） |
| I | 长条 | \| | 青色（#06b6d4 → #0891b2） |
| L | L型 | ⌐ | 橙色（#f59e0b → #d97706） |
| J | 反L | ⌙ | 蓝色（#3b82f6 → #2563eb） |
| S | S型 | ∽ | 绿色（#10b981 → #059669） |
| Z | Z型 | ∾ | 红色（#ef4444 → #dc2626） |
| O | 方块 | ◼ | 黄色（#eab308 → #ca8a04） |

**方块特点**：
- 每个方块由4个小格组成
- 方块颜色为渐变色 + 发光效果
- 方块可以旋转90度（除O型）
- 方块从顶部中央生成

#### 计分系统

**基础分数**（基于消除行数）：

| 消除行数 | 基础分数 | 说明 |
|---------|---------|------|
| 1行 | 100分 | 单行消除 |
| 2行 | 300分 | 双行消除 |
| 3行 | 500分 | 三行消除 |
| 4行 | 800分 | Tetris!（四行消除） |

**分数计算公式**：

```
最终分数 = 基础分数 × 关卡系数 + 额外奖励 × 关卡倍率
```

**关卡系数**：
- 分数乘以当前关卡数
- 例如：第3关单行消除 = 100 × 3 = 300分

**额外奖励**：
- **Tetris奖励**（4行）：额外 200 × 关卡
- **高关卡倍率**：
  - 6-10关：所有分数 × 1.2
  - 11关以上：所有分数 × 1.3

**计分示例**：
- 第1关单行：100 × 1 = 100分
- 第5关双行：300 × 5 = 1500分
- 第10关Tetris：(800 + 200) × 10 × 1.2 = 12000分

#### 关卡系统

**升级规则**：
- 每消除10行升1级
- 关卡计算：`关卡 = ⌊总行数 / 10⌋ + 1`
- 无关卡上限

**速度变化**：
- **初始速度**：1000ms/格（1秒下降1格）
- **速度递增**：每关减少100ms
- **计算公式**：`间隔 = max(100, 1000 - (关卡-1) × 100)`
- **最快速度**：100ms/格（第10关及以上）

**速度表**：
| 关卡 | 下降间隔 | 说明 |
|------|---------|------|
| 1 | 1000ms | 初始速度 |
| 2 | 900ms | 稍快 |
| 5 | 600ms | 中速 |
| 10 | 100ms | 最快 |
| 11+ | 100ms | 保持最快 |

#### 游戏板

- **尺寸**：10列 × 20行
- **格子大小**：30×30 像素
- **总尺寸**：300×600 像素
- **背景**：深色渐变（#0a0a0a → #1a1a1a）

#### 操作机制

**移动**：
- 左右移动：一次移动1格
- 边界限制：不能移出游戏板
- 碰撞检测：不能与已有方块重叠

**旋转**：
- 旋转方向：90度顺时针
- 旋转算法：坐标变换 (x, y) → (-y, x)
- O型方块：不旋转
- 墙踢：碰壁时不旋转

**下降**：
- **软下降**（↓键）：加速下落
- **硬下降**（空格）：瞬间落到底部
- **自动下降**：根据关卡速度自动下落
- **锁定**：无法继续下落时固定在游戏板上

### 游戏流程

1. **开始游戏**：
   - 点击"Start Game"或点击覆盖层
   - 第一个方块从顶部出现
   - 计时器开始

2. **控制方块**：
   - 使用方向键移动和旋转
   - 观察Next预览下一个方块
   - 规划放置位置

3. **填满行**：
   - 将方块排列填满横向一行
   - 填满的行自动消除
   - 上方方块自动下落

4. **消除得分**：
   - 消除行数越多，分数越高
   - 同时消除4行获得Tetris奖励
   - 分数实时更新

5. **关卡提升**：
   - 每消除10行升1级
   - 速度自动加快
   - 难度递增

6. **游戏结束**：
   - 方块堆到顶部无法生成新方块
   - 显示最终统计数据
   - 选择再玩一次

## 🖥️ 界面说明

### 游戏头部
- **游戏标题**：🎮 Tetris（渐变色）
- **Rules按钮**：查看游戏规则侧边栏

### 主游戏区

#### 游戏画布
**尺寸**：
- 桌面：300×600 像素
- 移动端：250×500 像素

**视觉元素**：
- 背景：深色渐变
- 边框：2px青色边框
- 方块：渐变色 + 发光效果
- 网格：10×20

#### 开始覆盖层
- 半透明黑色遮罩
- ▶️ 图标（脉冲动画）
- "Click to Start Game"提示
- 操作提示：
  - ←→ Move
  - ↑ Rotate
  - ↓ Drop

### 侧边栏（右侧/顶部）

#### Next Piece预览
- 标题："Next Piece"
- 预览框：120×120px
- 显示下一个方块
- 方块尺寸：24×24px

#### 游戏统计
4个统计项（垂直排列）：

1. **Level**（关卡）：
   - 标签：Level
   - 数值：当前关卡（青色）
   - 字体：Orbitron

2. **Lines**（行数）：
   - 标签：Lines
   - 数值：已消除总行数
   - 用于计算关卡

3. **Score**（分数）：
   - 标签：Score
   - 数值：当前总分
   - 实时更新

4. **Time**（时间）：
   - 标签：Time
   - 格式：MM:SS（00:00）
   - 暂停时不计时

#### 控制面板
3个按钮（垂直排列）：

1. **▶️ Start Game**（绿色渐变）：
   - 开始新游戏
   - 游戏进行中禁用

2. **⏸️ Pause**（橙色渐变）：
   - 暂停/继续游戏
   - 暂停时变为"▶️ Resume"
   - 游戏未开始时禁用

3. **🔄 Restart**（紫色渐变）：
   - 重新开始游戏
   - 任何时候可用

#### 游戏提示
2个快捷键提示：
- **ESC**：Pause/Resume
- **SPACE**：Hard Drop

### 规则侧边栏
**显示方式**：从左侧滑入（400px宽）

**内容区域**：
1. **🎮 Controls**（操作控制）：
   - ← → 左右移动
   - ↑ 旋转
   - ↓ 软下降
   - Space 硬下降
   - ESC 暂停/继续

2. **🏆 Game Objective**（游戏目标）：
   - 填满完整行消除
   - 多行消除获得额外分数
   - 速度随关卡提升
   - 方块到顶游戏结束

3. **🧮 Scoring**（计分规则）：
   - 1行：100分
   - 2行：300分
   - 3行：500分
   - 4行：800分（Tetris!）

**关闭按钮**：右上角×按钮（悬停旋转90度）

### 游戏结束模态框
全屏半透明黑色遮罩：

**主卡片内容**：
- **图标**：🎮
- **标题**："Game Over"（青色）

**最终统计**（4项）：
1. **Final Score**：最终得分
2. **Lines Cleared**：消除总行数
3. **Game Time**：游戏时长
4. **Highest Level**：到达最高关卡

**按钮**：
- ▶️ Play Again（绿色渐变）

## 🎨 视觉效果

### 配色方案
- **主色调**：紫色（#667eea）
- **次色调**：深紫（#764ba2）
- **强调色**：青色（#4facfe）
- **成功色**：绿色（#00f5a0）
- **警告色**：橙色（#ffb347）
- **危险色**：红色（#ff6b6b）
- **背景**：深蓝渐变（#0f0f23 → #1a1a2e → #16213e）

### 方块渐变色
- **T型**：紫色渐变（#a855f7 → #7c3aed）
- **I型**：青色渐变（#06b6d4 → #0891b2）
- **L型**：橙色渐变（#f59e0b → #d97706）
- **J型**：蓝色渐变（#3b82f6 → #2563eb）
- **S型**：绿色渐变（#10b981 → #059669）
- **Z型**：红色渐变（#ef4444 → #dc2626）
- **O型**：黄色渐变（#eab308 → #ca8a04）

### 动画效果

1. **脉冲动画**：开始图标缩放+透明度（2秒循环）
2. **发光效果**：方块box-shadow发光
3. **分数弹出**：消除时显示得分（向上飘动淡出）
4. **按钮悬停**：上浮2px + 光扫过
5. **侧边栏滑入**：从左侧滑入（0.3秒）
6. **模态框弹入**：淡入 + 向上移动
7. **关闭按钮**：悬停旋转90度

### 特殊效果
- **毛玻璃**：backdrop-filter模糊
- **渐变文字**：标题使用渐变色裁剪
- **阴影层次**：多级box-shadow
- **平滑过渡**：cubic-bezier缓动函数
- **光扫过**：按钮悬停光从左到右扫过

## 📱 响应式支持

### 桌面设备（> 768px）
- 主游戏区：横向布局
- 游戏板：300×600px
- 侧边栏：固定300px宽
- 统计：垂直排列

### 移动设备（≤ 768px）
- 主游戏区：纵向布局
- 游戏板：250×500px，格子25×25px
- 侧边栏：100%宽，移到顶部
- 统计：横向排列（2×2网格）
- 控制按钮：横向排列
- 规则侧边栏：100%宽

## 🚀 快速开始

### 运行游戏
1. 在浏览器中打开 `index.html`
2. 点击"Start Game"或点击覆盖层
3. 使用方向键和空格开始游戏！

### 外部依赖
- **Google Fonts**：Orbitron、Noto Sans SC
- **Font Awesome 6.4.0**：图标库（CDN）

### 浏览器要求
- ✅ 支持 ES6 Class 语法
- ✅ 支持 CSS Grid & Flexbox
- ✅ 支持 CSS Variables
- ✅ 支持 backdrop-filter
- ✅ Chrome / Edge（推荐）
- ✅ Firefox
- ✅ Safari

## 💡 游戏技巧

### 新手技巧
1. **提前规划**：观察Next预览规划位置
2. **留出空间**：不要把方块堆得太高
3. **平整基础**：保持底部平整便于消除
4. **优先消除**：尽快消除行获得分数
5. **熟悉旋转**：练习各方块的旋转方式

### 进阶技巧
1. **T-Spin技巧**：利用T型方块旋转消除
2. **井式策略**：留一列空位等待I型
3. **连续消除**：规划连续多次消除
4. **速度适应**：提前适应高关卡速度
5. **软降控制**：用软降精准控制落点

### 高手技巧
1. **Tetris追求**：优先追求4行消除
2. **完美堆叠**：最小化凹陷和孔洞
3. **预判组合**：提前2-3个方块规划
4. **极限操作**：高速下使用硬降节省时间
5. **关卡冲刺**：高关卡下保持冷静

### 高分策略
1. **多行优先**：尽量同时消除多行
2. **Tetris奖励**：4行消除分数最高
3. **高关卡挑战**：关卡越高分数倍率越高
4. **避免堆高**：保持低高度降低风险
5. **稳定第一**：稳定比速度更重要

## 🏆 挑战目标

### 分数挑战
- 🥉 **新手**：达到 1,000 分
- 🥈 **入门**：达到 5,000 分
- 🥇 **熟练**：达到 10,000 分
- 💎 **高手**：达到 25,000 分
- 👑 **大师**：达到 50,000 分
- 🌟 **传奇**：达到 100,000+ 分

### 关卡挑战
- 🎮 **起步者**：到达第 5 关
- 🔥 **坚持者**：到达第 10 关
- ⚡ **挑战者**：到达第 15 关
- 💪 **征服者**：到达第 20 关
- 🏅 **不屈者**：到达第 30 关

### 行数挑战
- 📊 **初学者**：消除 50 行
- 📈 **进阶者**：消除 100 行
- 📉 **专家**：消除 200 行
- 🎯 **大师**：消除 500 行

### 特殊挑战
- 🎯 **Tetris大师**：单局完成10次Tetris
- ⚡ **速度之王**：在10关以上坚持5分钟
- 💯 **完美主义**：单局无孔洞堆叠100行

## 📄 文件结构

```
Tetris/
├── index.html          # 游戏主页面
├── style.css           # 样式表（UI设计、动画）
├── script.js           # 游戏逻辑（OOP实现）
└── README.md           # 本文档
```

## 🔧 技术细节

### 核心参数
```javascript
游戏板尺寸: 10×20 格子
格子大小: 30×30px
画布尺寸: 300×600px

初始速度: 1000ms/格
最快速度: 100ms/格
速度递减: 100ms/关卡

方块类型: 7种（T、I、L、J、S、Z、O）
方块数量: 4格/方块
```

### 类结构
```javascript
class TetrisGame {
  构造函数:
    - 初始化常量
    - 初始化游戏状态
    - 定义7种方块类型
    - 绑定DOM元素
  
  核心方法:
    - startGame(): 开始游戏
    - gameLoop(): 游戏主循环
    - movePiece(): 移动方块
    - rotatePiece(): 旋转方块
    - lockPiece(): 锁定方块
    - clearLines(): 消除行
    - updateScore(): 更新分数
    - gameOver(): 游戏结束
}
```

### 游戏循环
```javascript
每个时间间隔:
1. 检查是否暂停
2. 方块自动下降1格
3. 如果无法下降：
   - 锁定方块到游戏板
   - 检查并消除完整行
   - 生成新方块
   - 检查游戏结束
4. 重新渲染游戏画面
```

### 碰撞检测
```javascript
检查方块是否可以移动到新位置:
1. 遍历方块的4个格子
2. 计算新位置坐标
3. 检查边界（0 ≤ x < 10, y < 20）
4. 检查是否与已有方块重叠
5. 全部通过返回true，否则false
```

### 旋转算法
```javascript
90度顺时针旋转:
  (x, y) → (-y, x)

示例：
  (1, 0) → (0, 1)
  (0, 1) → (-1, 0)
  (-1, 0) → (0, -1)
  (0, -1) → (1, 0)
```

### 分数计算
```javascript
function calculateScore(lines) {
  const base = [0, 100, 300, 500, 800][lines];
  let score = base * level;
  
  if (lines === 4) {
    score += 200 * level; // Tetris奖励
  }
  
  if (level > 5) {
    score *= 1.2;
  }
  if (level > 10) {
    score *= 1.3;
  }
  
  return Math.floor(score);
}
```

### 时间系统
```javascript
游戏时间 = (当前时间 - 开始时间 - 暂停总时长) / 1000

暂停处理:
- 暂停时记录暂停开始时间
- 继续时计算暂停时长并累加
- 游戏时间不包含暂停时长
```

## 🐛 反馈与支持

### 常见问题

**Q: 如何旋转方块？**  
A: 按向上方向键（↑）旋转方块90度顺时针。注意O型方块无法旋转。

**Q: 硬下降和软下降有什么区别？**  
A: 软下降（↓）加速下落但可以调整位置，硬下降（空格）瞬间落到底部立即锁定。

**Q: 如何获得高分？**  
A: 尽量同时消除多行，特别是4行Tetris。关卡越高分数倍率越高。

**Q: 为什么有时候旋转不了？**  
A: 旋转后的位置会与墙壁或已有方块碰撞时无法旋转（墙踢机制）。

**Q: 关卡如何提升？**  
A: 每消除10行自动升1级，速度会自动加快。

**Q: 时间会暂停吗？**  
A: 暂停游戏时，游戏时间不计入。只计算实际游戏时长。

**Q: Next预览有什么用？**  
A: 可以提前看到下一个方块，帮助你规划当前方块的放置位置。

**Q: 为什么速度突然变快了？**  
A: 升级后速度会自动加快，每关减少100ms，最快到达100ms。

**Q: 可以保存游戏进度吗？**  
A: 目前不支持保存进度，但可以暂停游戏。

**Q: 如何查看游戏规则？**  
A: 点击右上角的"Rules"按钮查看详细规则。

### 已知限制
- 无保存/加载功能
- 无高分榜
- 无背景音乐
- 无墙踢（Super Rotation System）
- 无Hold功能（保留方块）
- 无Ghost（幽灵方块显示落点）
- 单人游戏，无多人模式

### 性能优化建议
- 使用现代浏览器
- 关闭不必要的浏览器标签
- 确保硬件加速已启用
- 高关卡时建议全屏游戏

### 未来改进方向
- 🎵 添加背景音乐和音效
- 👻 添加Ghost显示（预览落点）
- 🎯 添加Hold功能（保留方块）
- 🏆 本地/在线高分榜
- 📊 详细统计图表
- 🎨 多种主题皮肤
- 🌐 在线对战模式
- 💾 游戏进度保存
- 🎮 触摸屏优化（虚拟按键）
- 🔊 自定义音效
- 📱 PWA支持（离线游戏）
- 🎯 成就系统
- 🏅 每日挑战

---

**准备好挑战俄罗斯方块了吗？开始游戏吧！** 🎮🎯✨
