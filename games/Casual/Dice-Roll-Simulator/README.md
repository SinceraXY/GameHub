# 🎲 骰子模拟器 | Dice Roll Simulator

精美的 3D 骰子模拟器！体验真实的投骰效果，记录每一次投掷！

## 📖 游戏简介

骰子模拟器是一款基于 CSS 3D 变换技术开发的虚拟骰子投掷工具。它完美模拟了真实骰子的投掷效果，包括 3D 旋转动画、物理般的翻滚效果，并提供完整的历史记录和统计功能。无论是桌游辅助、随机决策还是纯粹娱乐，这个骰子模拟器都能为你提供流畅的使用体验。支持本地保存历史记录，随时查看过往投掷结果！

### 特色功能
- **3D 真实骰子**：使用 CSS 3D 变换渲染的立体骰子
- **流畅动画**：1 秒翻滚动画，多次旋转效果
- **完整历史**：记录所有投掷结果，最多保存 100 条
- **统计分析**：实时显示投掷次数、当前点数、平均点数
- **本地保存**：历史记录自动保存到浏览器
- **快捷操作**：点击骰子或按钮都可投掷
- **响应式设计**：完美适配各种设备

## 🎮 游戏玩法

### 基本操作

**投掷骰子的方式**：
1. **点击"投掷骰子"按钮**
2. **直接点击骰子**（快捷方式）

**清空历史**：
- 点击"清空历史"按钮
- 需要确认操作

### 功能说明

#### 投骰子

**投掷流程**：
1. 点击按钮或骰子
2. 骰子开始 3D 旋转动画（1秒）
3. 动画结束显示随机结果（1-6）
4. 结果自动添加到历史记录
5. 统计数据自动更新
6. 历史记录自动保存

**随机算法**：
- 使用 `Math.random()` 生成随机数
- 范围：1-6（标准六面骰子）
- 每个点数出现概率相等（各 1/6）

**防重复机制**：
- 投掷过程中按钮禁用
- 防止连续点击导致错误
- 动画完成后自动恢复

#### 3D 骰子展示

**骰子结构**：
- 尺寸：120×120×120px（桌面）
- 6 个面，每面独立渲染
- 使用 CSS Grid 布局点的位置
- 立体阴影和光照效果

**6 个面的布局**：
```
1 点：中心位置
2 点：对角线（左上-右下）
3 点：对角线（左上-中心-右下）
4 点：四个角
5 点：四个角 + 中心
6 点：两列，每列 3 个
```

**旋转角度定义**：
```javascript
1 点：rotateX(0deg) rotateY(0deg)      前面
2 点：rotateX(0deg) rotateY(-90deg)    右面
3 点：rotateX(0deg) rotateY(-180deg)   后面
4 点：rotateX(0deg) rotateY(90deg)     左面
5 点：rotateX(90deg) rotateY(0deg)     上面
6 点：rotateX(-90deg) rotateY(0deg)    下面
```

#### 历史记录

**记录内容**：
- 投掷次序："第 X 次投骰"
- 骰子点数：Unicode 骰子字符（⚀⚁⚂⚃⚄⚅）
- 最新记录显示在最上方

**显示特性**：
- 列表形式展示
- 最大高度 400px，超出滚动
- 每条记录带滑入动画
- 悬停效果（向右移动）

**存储限制**：
- 最多保存 100 条记录
- 超出后自动删除最旧记录
- 保存在浏览器 localStorage

#### 统计信息

**3 项统计**：

1. **投掷次数**：
   - 显示：总投掷次数
   - 初始值：0

2. **当前点数**：
   - 显示：最近一次投掷结果
   - 初始值："-"（未投掷）

3. **平均点数**：
   - 显示：所有投掷的平均值
   - 计算公式：总和 ÷ 次数
   - 保留：2 位小数
   - 初始值："-"（未投掷）

**实时更新**：
- 每次投掷后自动更新
- 清空历史后重置为初始值

#### 清空历史

**操作流程**：
1. 点击"清空历史"按钮
2. 弹出确认对话框
3. 确认后清空所有记录
4. 骰子重置显示为 1
5. 统计数据重置
6. 更新本地存储

**确认对话框**：
- 文字："确定要清空所有投骰历史吗？"
- 防止误操作

## 🖥️ 界面说明

### 游戏头部
- **游戏标题**：🎲 骰子模拟器
  - 骰子图标带弹跳动画（2秒循环）
  - 标题字体：2.5rem，紫色
- **描述文字**："点击按钮投掷骰子，体验真实的投骰效果！"

### 3D 骰子容器

**骰子场景**：
- 容器高度：250px（桌面）、220px（平板）、180px（手机）
- 透视效果：perspective: 1000px
- 骰子尺寸：120×120×120px（桌面）

**骰子样式**：
- 白色渐变背景（#ffffff → #f0f0f0）
- 紫色边框（3px）
- 圆角：15px
- 立体阴影效果
- 点的颜色：紫色径向渐变

**骰子状态**：
- 默认：稍微倾斜（rotateX(-20deg) rotateY(-20deg)）
- 悬停：放大 1.05 倍
- 点击：触发投掷
- 动画中：3D 旋转翻滚

**骰子阴影**：
- 椭圆形阴影
- 位置：骰子下方
- 脉冲动画（1秒循环）

### 投掷动画

**roll3D 动画**（1秒）：
```
0%   → 初始姿态
25%  → 旋转180° + 上跳50px
50%  → 旋转360° + 上跳30px
75%  → 旋转540° + 上跳10px
100% → 旋转720° + 落地
```

**动画特点**：
- 多轴旋转（X、Y、Z 轴）
- 上下浮动效果
- cubic-bezier 缓动曲线
- 旋转总计：720° × 3 轴

### 控制按钮

**投掷骰子按钮**：
- 图标：🎲
- 文字："投掷骰子"
- 样式：紫色渐变背景
- 悬停：向上浮动 2px + 加深颜色
- 禁用：半透明 + 不可点击

**清空历史按钮**：
- 图标：🗑️
- 文字："清空历史"
- 样式：灰色渐变背景
- 悬停：向上浮动 2px + 加深颜色

### 统计卡片

**3 张卡片**（横向排列）：

**卡片样式**：
- 浅灰渐变背景
- 圆角：16px
- 居中对齐
- 悬停：上浮 5px + 紫色边框

**卡片内容**：
- 上方：标签文字（小号，灰色）
- 下方：数值（2rem，紫色，粗体）

### 历史记录区

**标题**：
- 图标：📜
- 文字："投骰历史"
- 字体：1.8rem

**历史列表**：
- 最大高度：400px
- 超出滚动（自定义滚动条）
- 滚动条颜色：紫色

**历史条目**：
- 左侧：次序文字（"第 X 次投骰"）
- 右侧：Unicode 骰子字符（2.5rem）
- 白色渐变背景
- 左侧紫色边框（4px）
- 滑入动画（slideIn，0.3秒）
- 悬停：向右移动 5px

**空状态**：
- 图标：🎲（半透明）
- 文字："还没有投骰记录"
- 提示："点击上方按钮开始投骰吧！"
- 居中显示

### 页脚
- 文字："使用原生JavaScript开发 | 支持所有现代浏览器"
- 上方灰色分隔线

## 🎨 视觉效果

### 配色方案
- **主色调**：紫色（#6366f1）
- **主色深色**：深紫（#4f46e5）
- **主色浅色**：浅紫（#818cf8）
- **背景渐变**：#667eea → #764ba2
- **卡片背景**：白色（#ffffff）
- **文字主色**：深灰（#1f2937）
- **文字副色**：灰色（#6b7280）

### 动画效果

1. **弹跳动画**（bounce）：
   - 骰子图标
   - 上下浮动 10px
   - 2秒循环

2. **3D 旋转**（roll3D）：
   - 投掷动画
   - 多轴旋转 + 上下跳跃
   - 1秒单次

3. **阴影脉冲**（shadowPulse）：
   - 骰子阴影
   - 缩放 + 透明度变化
   - 1秒循环

4. **滑入动画**（slideIn）：
   - 历史条目
   - 从左侧滑入
   - 0.3秒单次

5. **淡入动画**（fadeIn）：
   - 整个容器
   - 透明度 + 向上移动
   - 0.6秒单次

### 特殊效果
- **3D 透视**：perspective 1000px
- **立体阴影**：内阴影 + 外阴影
- **渐变背景**：多处使用线性渐变
- **圆角设计**：统一圆角风格
- **平滑过渡**：0.3s ease 过渡
- **悬停效果**：上浮、移动、变色

## 📱 响应式支持

### 桌面设备（> 768px）
- 骰子尺寸：120×120×120px
- 点的尺寸：20×20px
- 容器高度：250px
- 统计卡片：横向 3 列

### 平板设备（≤ 768px）
- 骰子尺寸：100×100×100px
- 点的尺寸：16×16px
- 容器高度：220px
- 统计卡片：单列
- 按钮：全宽垂直排列

### 手机设备（≤ 480px）
- 骰子尺寸：80×80×80px
- 点的尺寸：13×13px
- 容器高度：180px
- 标题：垂直排列
- 历史字符：2rem

## 🚀 快速开始

### 运行游戏
1. 在浏览器中打开 `index.html`
2. 点击"投掷骰子"按钮或直接点击骰子
3. 查看结果和统计数据
4. 历史记录自动保存！

### 浏览器要求
- ✅ 支持 CSS 3D Transforms
- ✅ 支持 CSS Grid
- ✅ 支持 localStorage
- ✅ 支持 ES6 语法
- ✅ Chrome / Edge（推荐）
- ✅ Firefox
- ✅ Safari

### 无外部依赖
- ✅ 原生 JavaScript（无框架）
- ✅ 纯 CSS 动画（无库）
- ✅ 无需网络连接
- ✅ 轻量级（< 50KB）

## 💡 使用场景

### 桌游辅助
- **跑团 TRPG**：随时投掷骰子
- **桌面游戏**：替代实体骰子
- **大富翁**：决定移动步数
- **飞行棋**：投掷前进点数

### 随机决策
- **抽签决定**：1-6 随机选择
- **分组安排**：根据点数分组
- **顺序决定**：投掷比大小
- **概率测试**：测试随机性

### 教育用途
- **概率教学**：演示随机性
- **统计学习**：观察平均值
- **数学实验**：大数定律验证
- **编程教学**：展示随机算法

### 娱乐休闲
- **休息决策**：投掷决定活动
- **游戏惩罚**：根据点数执行
- **聚会游戏**：各种骰子游戏
- **纯粹娱乐**：观赏 3D 动画

## 📊 技术细节

### 骰子渲染

**6 个面的 3D 定位**：
```css
.dice-face-1 { transform: rotateY(0deg) translateZ(60px); }
.dice-face-2 { transform: rotateY(90deg) translateZ(60px); }
.dice-face-3 { transform: rotateY(180deg) translateZ(60px); }
.dice-face-4 { transform: rotateY(-90deg) translateZ(60px); }
.dice-face-5 { transform: rotateX(-90deg) translateZ(60px); }
.dice-face-6 { transform: rotateX(90deg) translateZ(60px); }
```

**点的布局系统**：
- 使用 CSS Grid（3×3 网格）
- 精确定位每个点
- place-self 属性控制位置

### 随机算法

```javascript
// 生成 1-6 的随机整数
const rollResult = Math.floor(Math.random() * 6) + 1;

// Math.random() 范围：[0, 1)
// Math.random() * 6 范围：[0, 6)
// Math.floor() 向下取整：0, 1, 2, 3, 4, 5
// +1 得到：1, 2, 3, 4, 5, 6
```

### 旋转逻辑

```javascript
// 根据点数设置骰子旋转
const rotations = {
  1: 'rotateX(0deg) rotateY(0deg)',
  2: 'rotateX(0deg) rotateY(-90deg)',
  3: 'rotateX(0deg) rotateY(-180deg)',
  4: 'rotateX(0deg) rotateY(90deg)',
  5: 'rotateX(90deg) rotateY(0deg)',
  6: 'rotateX(-90deg) rotateY(0deg)'
};

diceEl.style.transform = rotations[face];
```

### 历史记录管理

**数据结构**：
```javascript
historyList = [6, 3, 5, 1, 4, ...];  // 数组，最新在前
```

**添加记录**：
```javascript
historyList.unshift(rollResult);  // 添加到开头
```

**限制数量**：
```javascript
if (historyList.length > 100) {
  historyList = historyList.slice(0, 100);
}
```

**本地存储**：
```javascript
// 保存
localStorage.setItem('diceHistory', JSON.stringify(historyList));

// 加载
const saved = localStorage.getItem('diceHistory');
historyList = JSON.parse(saved);
```

### 统计计算

**平均点数**：
```javascript
const sum = historyList.reduce((acc, val) => acc + val, 0);
const average = (sum / historyList.length).toFixed(2);
```

### Unicode 骰子字符

```javascript
const diceFaces = {
  1: "&#9856;",  // ⚀
  2: "&#9857;",  // ⚁
  3: "&#9858;",  // ⚂
  4: "&#9859;",  // ⚃
  5: "&#9860;",  // ⚄
  6: "&#9861;"   // ⚅
};
```

## 🐛 反馈与支持

### 常见问题

**Q: 骰子是真随机的吗？**  
A: 是的，使用 JavaScript 的 `Math.random()` 生成随机数，每个点数概率相等（各 1/6）。

**Q: 历史记录会一直保存吗？**  
A: 会保存在浏览器 localStorage 中，除非清除浏览器数据或手动清空历史。

**Q: 最多能保存多少条记录？**  
A: 最多保存 100 条记录，超出后自动删除最旧的记录。

**Q: 可以同时投掷多个骰子吗？**  
A: 目前只支持单个骰子，可以连续投掷多次。

**Q: 投掷过程中可以再次点击吗？**  
A: 不可以，动画过程中按钮会被禁用，防止重复点击。

**Q: 平均点数应该是多少？**  
A: 理论平均值是 3.5（(1+2+3+4+5+6) ÷ 6），投掷次数越多越接近这个值。

**Q: 为什么历史记录显示的是特殊字符？**  
A: 使用 Unicode 骰子字符（⚀⚁⚂⚃⚄⚅）更直观地显示点数。

**Q: 骰子动画卡顿怎么办？**  
A: 确保使用现代浏览器，关闭不必要的标签页，或降低浏览器硬件加速设置。

**Q: 可以自定义骰子颜色吗？**  
A: 目前不支持，骰子使用固定的紫色主题。

**Q: 清空历史可以撤销吗？**  
A: 不可以，清空后无法恢复，操作前会有确认对话框。

### 已知限制
- 单个骰子（不支持多骰子）
- 固定 6 面骰子（不支持其他面数）
- 无音效
- 无骰子皮肤切换
- 无导出历史功能
- 无统计图表
- 无分享功能

### 技术建议
- 使用支持 CSS 3D 的现代浏览器
- 启用浏览器硬件加速以获得最佳性能
- 定期清理浏览器缓存

### 未来改进方向
- 🎲 支持多个骰子同时投掷
- 🎲 支持不同面数（4/8/10/12/20 面骰子）
- 🎨 多种骰子皮肤和颜色
- 🔊 添加投掷音效
- 📊 添加统计图表（点数分布、频率）
- 💾 导出历史记录（CSV/JSON）
- 📤 分享功能（分享结果）
- 🎯 预设投掷次数（自动投掷）
- ⚙️ 自定义设置（动画速度、声音等）
- 🏆 成就系统
- 📱 PWA 支持（离线使用）

---

**准备好投掷骰子了吗？开始吧！** 🎲✨🎯
