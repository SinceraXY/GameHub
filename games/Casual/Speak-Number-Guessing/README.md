# 🎤 Voice Number Guessing | 语音猜数字

用你的声音猜数字！基于 Web Speech API 的创新语音识别游戏！

## 📖 游戏简介

Voice Number Guessing（语音猜数字）是一款结合语音识别技术的互动猜谜游戏。电脑会随机生成一个 1-100 之间的数字，你需要通过语音说出数字来猜测。系统会实时识别你的声音，并根据猜测给出"太大"或"太小"的提示。游戏支持中文数字发音（如"五十"）和阿拉伯数字发音（如"50"），挑战你用最少的次数猜中目标数字！

### 游戏特色
- **语音识别**：使用 Web Speech API 识别语音
- **中文支持**：支持中文数字和阿拉伯数字发音
- **实时反馈**：即时显示识别结果和提示
- **智能识别**：自动提取数字，支持多种表达方式
- **统计追踪**：记录尝试次数、最少次数、总游戏数
- **本地保存**：统计数据自动保存
- **直观界面**：清晰的语音状态和消息显示
- **浏览器兼容**：支持 Chrome 和 Edge

## 🎮 游戏玩法

### 基本操作

**开始游戏**：
1. 点击"开始新游戏"按钮
2. 允许浏览器访问麦克风（首次需要）
3. 等待"正在监听..."状态
4. 清晰地说出数字

**发音方式**：
- **中文数字**：一、二十三、五十、九十九、一百
- **阿拉伯数字**：50、23、99、100
- **混合表达**：都支持识别

### 游戏规则

#### 基本规则
- **数字范围**：1-100（含1和100）
- **目标**：用最少次数猜中随机数字
- **提示**：每次猜测后给出"太大"或"太小"的提示
- **胜利**：猜中目标数字

#### 语音识别

**支持的发音**：

**阿拉伯数字**（直接说）：
- 1、2、3...99、100

**中文数字**（多种表达）：
```
单位数（1-9）：
- 一、二、三、四、五、六、七、八、九

十位数：
- 十 = 10
- 二十、三十、四十...九十

十几：
- 十一、十二、十三...十九

完整数字：
- 二十三、五十六、九十九

特殊：
- 一百、百 = 100
```

**支持的别名和繁体**：
- 壹、贰、叁...（大写数字）
- 幺（1）、两/俩（2）
- 〇（0）

#### 提示系统

**猜测反馈**：
1. **太大了**：
   - 显示"太大了！试试更小的数字"
   - 提示：目标数字 < 你猜的数字

2. **太小了**：
   - 显示"太小了！试试更大的数字"
   - 提示：目标数字 > 你猜的数字

3. **猜中**：
   - 显示恭喜信息
   - 根据尝试次数给出评价
   - 更新统计数据

**无效输入**：
- 未识别到数字：提示重新发音
- 超出范围（<1 或 >100）：提示有效范围

#### 评价系统

根据尝试次数给出不同评价：

- **1 次**：🎆 难以置信！第一次就猜对了！
- **2-5 次**：🚀 非常棒！你的直觉很准！
- **6-10 次**：👍 不错！继续努力！
- **11+ 次**：🎯 成功了！多练习会更好！

#### 统计数据

**3 项统计**（本地保存）：

1. **当前次数**：
   - 本局游戏的尝试次数
   - 每次猜测 +1

2. **最少次数**：
   - 历史最少尝试次数记录
   - 初始显示"-"

3. **总游戏数**：
   - 完成的游戏局数
   - 猜中一次 +1

### 游戏流程

1. **准备阶段**：
   - 点击"开始新游戏"
   - 浏览器请求麦克风权限
   - 允许麦克风访问

2. **开始猜测**：
   - 等待"正在监听..."状态
   - 清晰地说出数字
   - 系统自动识别

3. **查看反馈**：
   - 显示识别的数字
   - 显示"太大"或"太小"提示
   - 查看范围提示

4. **持续猜测**：
   - 根据提示调整猜测
   - 缩小范围
   - 接近目标

5. **猜中目标**：
   - 显示恭喜信息
   - 查看尝试次数和评价
   - 统计数据自动更新

6. **重新挑战**：
   - 点击"开始新游戏"
   - 挑战更少次数记录

## 🖥️ 界面说明

### 游戏头部

**麦克风图标**：
- SVG 图标（绿色）
- 浮动动画（上下浮动10px，3秒循环）
- 脉冲光环（2秒循环扩散）

**游戏标题**：
- "Voice Number Guessing"
- 字体：2.5rem，绿色

**描述**：
- "用语音猜出1-100之间的数字！"

**语言提示**：
- 🗣️ 提示框（黄色渐变）
- 文字："请使用**中文**发音数字（如：五十、50）"
- 温和脉冲动画（2秒循环）

### 统计卡片（3张）

**卡片样式**：
- 浅灰渐变背景
- 居中对齐
- 悬停：上浮5px + 绿色边框

**3张卡片**：

1. **当前次数**：
   - 标签："当前次数"
   - 数值：整数（如 "5"）
   - 颜色：绿色（2rem）

2. **最少次数**：
   - 标签："最少次数"
   - 数值：整数或"-"
   - 颜色：绿色

3. **总游戏数**：
   - 标签："总游戏数"
   - 数值：整数（如 "3"）
   - 颜色：绿色

### 语音状态区

**状态显示**（大卡片）：

**空闲状态**：
- 灰色渐变背景
- 灰色边框
- 图标：💤
- 文字："未开始 - 点击下方按钮开始游戏"

**监听状态**：
- 蓝色渐变背景
- 蓝/绿色边框（脉冲动画）
- 图标：🎤（脉冲缩放1.0 → 1.2）
- 文字："正在监听...请用中文说数字"

**权限错误**：
- 图标：⚠️
- 文字："请允许访问麦克风权限"

### 消息显示区

**区域样式**：
- 橙色渐变背景
- 左侧橙色边框（4px）
- 最小高度：120px
- 居中对齐

**内容显示**：

1. **识别结果**：
   - 文字："你说的是："
   - 数字框：绿色背景，白色文字，2.5rem
   - 缩放出现动画（0.5秒）

2. **反馈信息**：
   - 太大：红色文字，浅红背景
   - 太小：蓝色文字，浅蓝背景
   - 无效：红色文字，浅红背景
   - 滑入动画（0.5秒）

3. **胜利信息**：
   - 识别的数字（绿色大框）
   - 评价文字（绿色背景）
   - 尝试次数

**空状态**：
- 灰色渐变背景
- 灰色边框

### 提示区域

**样式**：
- 黄色渐变背景
- 左侧黄色边框（4px）

**内容**：
- 图标 + 提示文字
- 例如："💡 我已经想好了一个1到100之间的数字，开始猜吧！"

### 控制按钮

**2个按钮**（横向排列）：

1. **开始新游戏**：
   - 图标：🎮
   - 文字："开始新游戏"
   - 颜色：绿色渐变
   - 最小宽度：180px

2. **重置统计**：
   - 图标：🔄
   - 文字："重置统计"
   - 颜色：蓝色渐变

**按钮样式**：
- 悬停：上浮2px + 阴影加深
- 点击：恢复原位
- 移动端：全宽垂直排列

### 游戏说明

**切换按钮**：
- 图标：❓（展开后变为 ➖）
- 文字："游戏说明"
- 黄色渐变背景
- 全宽按钮

**说明内容**（可折叠）：
- 5条游戏说明
- 黄色渐变背景
- 左侧黄色边框
- 每条前面有✓图标

### 浏览器警告

**不支持时显示**：
- 红色渐变背景
- 红色边框
- 抖动动画（0.5秒）
- 文字："⚠️ 你的浏览器不支持语音识别功能，请使用Chrome或Edge浏览器。"

### 页脚
- 文字："使用Web Speech API开发 | 支持Chrome和Edge浏览器"
- 上方灰色分隔线

## 🎨 视觉效果

### 配色方案
- **主色调**：绿色（#10b981）
- **主色深色**：深绿（#059669）
- **次色调**：蓝色（#3b82f6）
- **成功色**：绿色（#10b981）
- **错误色**：红色（#ef4444）
- **警告色**：橙色（#f59e0b）
- **背景渐变**：深蓝（#1e3a8a）→ 紫色（#7c3aed）

### 动画效果

1. **淡入动画**（fadeIn）：
   - 整个容器
   - 0.6秒

2. **浮动动画**（float）：
   - 麦克风图标
   - 上下浮动10px
   - 3秒循环

3. **脉冲光环**（pulse）：
   - 麦克风周围
   - 缩放0.8 → 1.3
   - 透明度1 → 0
   - 2秒循环

4. **温和脉冲**（gentle-pulse）：
   - 语言提示框
   - 阴影变化
   - 2秒循环

5. **边框脉冲**（pulse-border）：
   - 监听状态边框
   - 颜色切换 + 阴影扩散
   - 2秒循环

6. **麦克风脉冲**（mic-pulse）：
   - 监听状态图标
   - 缩放1.0 → 1.2
   - 1.5秒循环

7. **出现动画**（appear）：
   - 数字框
   - 缩放 + 透明度
   - 0.5秒

8. **滑入动画**（slideIn）：
   - 反馈文字
   - 从上方滑入
   - 0.5秒

9. **下滑动画**（slideDown）：
   - 游戏说明展开
   - 0.3秒

### 特殊效果
- **渐变背景**：多处使用线性渐变
- **阴影层次**：多级 box-shadow
- **悬停效果**：上浮、变色
- **平滑过渡**：0.3s ease
- **发光效果**：图标阴影

## 📱 响应式支持

### 桌面设备（> 768px）
- 容器最大宽度：900px
- 标题：2.5rem
- 麦克风图标：120×120px
- 统计卡片：自适应3列
- 按钮：横向排列

### 平板/手机设备（≤ 768px）
- 标题：2rem
- 麦克风图标：80×80px
- 统计卡片：单列
- 按钮：垂直排列全宽

### 小手机（≤ 480px）
- 标题：1.6rem
- 数字框：2rem
- 状态文字：1rem

## 🚀 快速开始

### 运行游戏
1. 使用 **Chrome** 或 **Edge** 浏览器
2. 打开 `index.html`
3. 点击"开始新游戏"
4. 允许麦克风访问
5. 说出数字开始猜！

### 浏览器要求
- ✅ **Chrome**（推荐，完整支持）
- ✅ **Edge**（完整支持）
- ❌ **Firefox**（不支持 Web Speech API）
- ❌ **Safari**（部分支持，不推荐）
- ❌ **IE**（不支持）

### 系统要求
- ✅ 麦克风设备
- ✅ 麦克风权限
- ✅ 支持 localStorage
- ✅ 支持 ES6
- ✅ 安静环境（提高识别准确度）

## 💡 使用技巧

### 提高识别准确度
1. **清晰发音**：咬字清楚，语速适中
2. **安静环境**：减少背景噪音
3. **标准中文**：使用普通话发音
4. **合适距离**：距离麦克风 10-30cm
5. **等待状态**：确保"正在监听..."显示后再说

### 中文数字技巧
- **简单数字**：直接说"五十"、"二十三"
- **十位数**：说"三十"、"七十"（不要说"三零"）
- **十几**：说"十五"、"十八"
- **整十**：说"十"、"二十"、"九十"
- **一百**：说"一百"或"百"

### 阿拉伯数字技巧
- 直接说"五零"、"二十三"
- 系统会自动识别数字

### 猜数字策略

**二分法（最优策略）**：
1. 第一次猜 50（中间值）
2. 如果太大，猜 25（1-49的中间）
3. 如果太小，猜 75（51-100的中间）
4. 持续二分，最多 7 次猜中

**理论最少次数**：
- 100 个数字，二分法最多 7 次（log₂100 ≈ 6.64）

**实际策略**：
- 记住每次的范围
- 总是猜范围的中间值
- 避免随机猜测

## 🔧 技术细节

### Web Speech API

**初始化**：
```javascript
window.SpeechRecognition = 
  window.SpeechRecognition || window.webkitSpeechRecognition;

recognition = new window.SpeechRecognition();
recognition.lang = 'zh-CN';      // 中文
recognition.continuous = true;    // 持续监听
recognition.interimResults = false; // 仅最终结果
recognition.maxAlternatives = 3;  // 返回3个可能
```

**事件监听**：
```javascript
recognition.addEventListener("result", onSpeechResult);
recognition.addEventListener("end", onRecognitionEnd);
recognition.addEventListener("error", onRecognitionError);
recognition.addEventListener("start", onRecognitionStart);
```

### 中文数字转换

**支持的模式**：
```javascript
// 1. 阿拉伯数字：直接提取
"50" → 50

// 2. 单位数
"五" → 5

// 3. 整十
"十" → 10
"五十" → 50

// 4. 十几
"十五" → 15

// 5. 完整数字
"二十三" → 23
"九十九" → 99

// 6. 特殊
"一百"/"百" → 100
```

**字典映射**：
```javascript
chineseDigits = {
  '零': 0, '〇': 0,
  '一': 1, '壹': 1, '幺': 1,
  '二': 2, '贰': 2, '两': 2, '俩': 2,
  '三': 3, '叁': 3,
  // ... 等
};
```

### 提取算法

```javascript
function extractNumber(text) {
  // 1. 尝试提取阿拉伯数字
  const arabicMatch = text.match(/\d+/);
  
  // 2. 处理特殊情况（十、百）
  if (text === '十') return 10;
  
  // 3. 匹配模式（几十、十几、几十几）
  const tensMatch = text.match(/([一-九])十/);
  const teenMatch = text.match(/十([一-九])/);
  const fullMatch = text.match(/([一-九])十([一-九])/);
  
  // 4. 单个中文数字
  // ...
}
```

### 统计数据结构

```javascript
stats = {
  totalGames: 0,    // 总游戏数
  bestScore: null,  // 最少次数
  gamesWon: 0       // 胜利次数
}

存储键：'voiceGuessingStats'
存储位置：localStorage
```

### 自动重启机制

```javascript
// 识别结束后自动重启（100ms延迟）
onRecognitionEnd() {
  if (game.isPlaying) {
    setTimeout(() => {
      recognition.start();
    }, 100);
  }
}
```

## 🐛 反馈与支持

### 常见问题

**Q: 为什么无法使用？**  
A: 请确保使用 Chrome 或 Edge 浏览器，Firefox 和 Safari 不完全支持 Web Speech API。

**Q: 如何允许麦克风权限？**  
A: 点击地址栏左侧的🔒或🎤图标，设置为"允许"，然后刷新页面。

**Q: 为什么识别不准确？**  
A: 请在安静环境中清晰发音，距离麦克风 10-30cm，使用标准普通话。

**Q: 支持哪些数字表达方式？**  
A: 支持中文数字（如"五十"）和阿拉伯数字（如"50"），系统会自动识别。

**Q: 可以说英文数字吗？**  
A: 不可以，系统设置为中文识别（zh-CN），请使用中文或阿拉伯数字发音。

**Q: 为什么有时候不响应？**  
A: 语音识别可能会自动停止，系统会在100ms后自动重启。如果长时间无响应，请重新开始游戏。

**Q: 统计数据会保存吗？**  
A: 会的，统计数据保存在浏览器 localStorage 中，除非清除浏览器数据。

**Q: 如何重置统计？**  
A: 点击"重置统计"按钮，确认后清空所有统计数据。

**Q: 最少需要几次才能猜中？**  
A: 使用二分法策略，理论上最多需要 7 次（log₂100）。

**Q: 为什么说"五零"识别不出50？**  
A: 系统会尝试识别，但建议说"五十"或直接说"50"（阿拉伯数字）。

### 已知限制
- 仅支持 Chrome 和 Edge 浏览器
- 需要麦克风设备和权限
- 识别准确度受环境影响
- 不支持英文数字发音
- 不支持离线使用
- 可能存在网络延迟

### 故障排除

**麦克风权限被拒绝**：
1. 点击地址栏左侧图标
2. 设置麦克风为"允许"
3. 刷新页面

**识别不准确**：
1. 检查环境噪音
2. 调整麦克风位置
3. 清晰发音
4. 使用标准普通话

**无法启动识别**：
1. 确认浏览器支持
2. 检查麦克风设备
3. 重启浏览器
4. 清除缓存

### 未来改进方向
- 🌐 支持多语言（英文、日文等）
- 🎯 添加难度选择（1-50、1-1000）
- 🏆 添加排行榜
- 📊 添加详细统计图表
- ⏱️ 添加计时模式
- 🎮 添加多人对战
- 🔊 添加语音播报提示
- 🎨 添加主题切换
- 📱 优化移动端体验
- 🤖 添加AI对手
- 💾 添加云端保存
- 📈 添加学习曲线分析

---

**准备好挑战语音猜数字了吗？开始游戏吧！** 🎤🎲✨
