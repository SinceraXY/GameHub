# 🔗 Match Pairs | 连连看

连接相同图标，挑战你的眼力和策略思维！

## 📖 游戏简介

Match Pairs（连连看）是一款经典的益智消除游戏。玩家需要在游戏板上找到两个相同的图标，并用不超过2个转折的路径将它们连接起来。成功连接后图标消除并获得分数。游戏提供三种难度，支持连击系统、提示功能和自动重排，挑战在时间耗尽前消除所有图标！

### 游戏特色
- **三种难度**：简单(8×6)、普通(10×8)、困难(12×10)
- **连线规则**：路径最多2个转折，无障碍物阻挡
- **连击系统**：连续消除获得额外加分
- **提示功能**：3次提示机会，高亮可消除配对
- **自动重排**：检测无解时自动重新排列
- **Canvas连线**：绿色连线实时显示消除路径
- **60种图标**：丰富的emoji表情
- **倒计时挑战**：不同难度有不同时间限制

## 🎮 游戏玩法

### 基本操作

**连接图标**：
1. 点击第一个图标（高亮显示）
2. 点击第二个相同图标
3. 如果路径有效，显示绿色连线并消除
4. 如果路径无效，切换选中第二个图标

**使用提示**：
- 点击"💡 提示"按钮
- 高亮显示一对可消除的图标
- 使用后重置连击

**重排图标**：
- 点击"🔀 重排"按钮
- 重新打乱未消除的图标
- 使用后重置连击

### 游戏规则

#### 三种难度

**🟢 简单（Easy）**：
- 网格大小：8×6 = 48 个格子
- 图标对数：24 对（48个）
- 时间限制：4 分钟（240秒）
- 适合：新手玩家

**🟡 普通（Normal，默认）**：
- 网格大小：10×8 = 80 个格子
- 图标对数：40 对（80个）
- 时间限制：3 分钟（180秒）
- 适合：普通玩家

**🔴 困难（Hard）**：
- 网格大小：12×10 = 120 个格子
- 图标对数：60 对（120个）
- 时间限制：2 分钟（120秒）
- 适合：高级玩家

#### 连线规则

**路径要求**：
- 连接两个相同图标
- 路径为横平竖直（不能斜线）
- 路径中间不能有其他图标阻挡
- **最多2个转折点**

**转折类型**：

**0个转折（直线）**：
```
A → → → B  (水平直线)
A
↓
↓
B         (垂直直线)
```

**1个转折（L形）**：
```
A → → →
      ↓
      B

A
↓
↓
→ → → B
```

**2个转折（Z形或U形）**：
```
A → → →
      ↓
      ↓
← ← ← B

A
↓
→ → → →
      ↓
      B
```

**边界外连线**：
- 可以从游戏板边界外绕过
- 边界外视为空路径

#### 计分系统

**基础分数**（根据连击）：
- 连击 < 3：+10 分
- 连击 3-4：+20 分
- 连击 5-9：+30 分
- 连击 ≥ 10：+50 分

**连击机制**：
- 连续消除图标累积连击
- 使用提示或重排重置连击为0
- 显示连击提示（每5连击倍数）

#### 提示系统

**提示次数**：
- 初始：3 次
- 使用后不恢复

**提示效果**：
- 高亮一对可消除的图标
- 绿色脉冲动画（3秒）
- 重置当前连击为0

**自动触发**：
- 检测到无解时自动重排

#### 重排功能

**手动重排**：
- 点击"🔀 重排"按钮
- 打乱所有未消除图标
- 重置连击为0

**自动重排**：
- 消除后检测是否还有可行移动
- 无解时1秒后自动重排
- 最多尝试10次确保有解

**重排算法**：
- 提取所有未消除图标
- Fisher-Yates 洗牌
- 验证是否存在可消除配对
- 无解则重新洗牌

### 游戏流程

1. **选择难度**：点击难度按钮
2. **开始游戏**：点击"开始游戏"
3. **连接图标**：点击两个相同图标
4. **观察连线**：绿色连线显示消除路径
5. **累积连击**：连续消除获得高分
6. **使用辅助**：提示或重排
7. **完成挑战**：消除所有图标或时间耗尽

## 🖥️ 界面说明

### 游戏头部
- **图标**：🔗（摆动动画）
- **标题**："Match Pairs"（渐变文字）
- **副标题**："连接相同图标，挑战你的眼力！"

### 统计卡片（4张）

1. **⏱️ 剩余时间**：
   - 格式：MM:SS
   - 倒计时显示

2. **🎯 得分**：
   - 当前总分
   - 蓝色数字

3. **⚡ 连击**：
   - 连续消除次数
   - 橙色数字

4. **💡 提示次数**：
   - 剩余提示次数
   - 初始3次

### 难度选择区

**黄色渐变背景**，3个按钮：
- 🟢 简单 (8×6)
- 🟡 普通 (10×8，默认）
- 🔴 困难 (12×10)

**按钮状态**：
- 未激活：白底 + 灰色边框
- 激活：蓝色渐变 + 白色文字

### 游戏区域

**游戏板**：
- 灰色渐变背景
- 网格布局（gap: 8px）
- 根据难度动态生成

**Canvas连线层**：
- 覆盖游戏板
- 绿色连线（4px宽）
- 横平竖直路径

**图标格子**：
- 尺寸：60×60px（桌面）
- 白色渐变背景
- 2rem emoji图标
- 圆角：8px

**格子状态**：
- 默认：白色渐变
- 悬停：放大1.1倍
- 选中：黄色背景 + 橙色边框 + 放大1.15倍
- 提示：绿色脉冲动画
- 匹配：缩放旋转消失动画

### 控制按钮

**4个按钮**（游戏中显示3个）：

1. **▶️ 开始游戏**（蓝色渐变）
2. **💡 提示**（青色渐变）
3. **🔀 重排**（紫色渐变）
4. **🔄 重新开始**（橙色渐变）

### 游戏说明

**绿色渐变背景**，5条说明：
- 点击两个相同的图标进行连线
- 连线路径不超过2个转折且无障碍物
- 成功消除获得分数，连击可获得额外加分
- 使用提示功能可高亮一对可消除的图标
- 在时间耗尽前消除所有图标即可获胜！

### 结果弹窗

**显示时机**：
- 消除所有图标（胜利）
- 时间耗尽（失败）

**胜利内容**：
- 图标：🎉
- 标题："恭喜通关！"
- 评价（根据分数）：
  - ≥500分：🏆 完美！连连看大师！
  - ≥300分：🌟 太棒了！眼力超群！
  - <300分：👍 不错！继续加油！

**失败内容**：
- 图标：⏰
- 标题："时间到！"
- 评价：😊 再试一次吧！

**统计信息**：
- 最终得分
- 最高连击

### 连击提示

**悬浮Toast**（每5连击倍数）：
- 位置：屏幕上方20%
- 文字：X COMBO!
- 样式：橙色渐变，大号字体
- 动画：缩放出现，1秒消失

### 重排提示

**临时消息**：
- 位置：屏幕中央
- 文字："🔀 正在重新排列..."
- 样式：蓝紫渐变
- 持续：1.5秒

## 🎨 视觉效果

### 配色方案
- **主色调**：蓝色（#3b82f6）
- **次色调**：紫色（#8b5cf6）
- **强调色**：橙色（#f59e0b）
- **成功色**：绿色（#10b981）
- **背景渐变**：#3b82f6 → #8b5cf6

### 动画效果

1. **摆动动画**（swing）：头部图标
2. **脉冲动画**（hintPulse）：提示图标
3. **匹配动画**（matchAnimation）：消除时缩放旋转
4. **连击动画**（comboShow）：连击提示缩放出现
5. **模态框动画**：淡入 + 滑入

## 📱 响应式支持

### 桌面（> 1024px）
- 图标：60×60px
- 4列统计卡片

### 平板（≤ 1024px）
- 图标：50×50px

### 手机（≤ 768px）
- 图标：45×45px
- 统计卡片：2×2网格
- 难度按钮：垂直排列

### 小手机（≤ 480px）
- 图标：40×40px
- 间距减小（5px）

## 🚀 快速开始

### 运行游戏
1. 在浏览器中打开 `index.html`
2. 选择难度
3. 点击开始游戏
4. 连接相同图标消除！

### 浏览器要求
- ✅ 支持 ES6
- ✅ 支持 Canvas
- ✅ 支持 CSS Grid
- ✅ Chrome / Edge / Firefox / Safari

## 💡 游戏技巧

### 提高分数
1. **保持连击**：连续消除获得更多分数
2. **优先边缘**：先消除边缘图标扩大路径
3. **规划路线**：提前思考连接路径
4. **节省提示**：尽量不使用提示保持连击

### 策略建议
- 从简单图标开始（容易找到配对）
- 留意可能被困的图标
- 优先消除会阻挡其他路径的图标
- 合理使用重排功能

### 路径技巧
- 利用边界外空间绕路
- 记住2个转折的各种形状
- 先检查直线和L形路径

## 🏆 挑战目标

### 分数挑战
- 🥉 新手：100分
- 🥈 熟练：300分
- 🥇 高手：500分
- 💎 大师：700分+

### 连击挑战
- ⚡ 10连击
- 🔥 20连击
- 👑 30连击+

### 时间挑战
- 简单难度：3分钟内完成
- 普通难度：2分钟内完成
- 困难难度：1分30秒内完成

## 🔧 技术细节

### 路径查找算法

**0个转折**：
```javascript
// 同行或同列直线连接
if (tile1.row === tile2.row || tile1.col === tile2.col)
```

**1个转折**：
```javascript
// L形路径，2种可能
corner1 = (tile1.row, tile2.col)
corner2 = (tile2.row, tile1.col)
```

**2个转折**：
```javascript
// 扩展行：垂直-水平-垂直
// 扩展列：水平-垂直-水平
// 包括边界外（row/col = -1 或 max+1）
```

### 连击计分算法
```javascript
let points = 10;
if (combo >= 10) points = 50;
else if (combo >= 5) points = 30;
else if (combo >= 3) points = 20;
```

### Canvas绘制
```javascript
// 绿色连线，4px宽
ctx.strokeStyle = '#10b981';
ctx.lineWidth = 4;
// 横平竖直路径
```

### 无解检测
```javascript
// 遍历所有配对，检查是否存在有效路径
hasValidMoves() {
  // 双层循环查找相同图标
  // 调用 findPath() 验证
}
```

## 🐛 反馈与支持

### 常见问题

**Q: 什么是2个转折？**  
A: 连线路径最多可以有2次方向改变（从横到竖或从竖到横）。

**Q: 为什么有些相同图标连不上？**  
A: 路径中间有其他图标阻挡，或转折次数超过2个。

**Q: 提示有什么用？**  
A: 高亮显示一对可消除的图标，但会重置连击。

**Q: 重排会扣分吗？**  
A: 不扣分，但会重置连击为0。

**Q: 如何获得高分？**  
A: 保持连击！连击10以上每次消除+50分。

**Q: 无解怎么办？**  
A: 游戏会自动检测无解并重排，也可手动点击重排按钮。

**Q: 可以走边界外吗？**  
A: 可以，边界外视为空路径，可以绕过去。

**Q: 时间不够怎么办？**  
A: 选择简单难度，时间更充裕（4分钟）。

**Q: 连击如何累积？**  
A: 连续消除图标不间断，使用提示或重排会重置。

**Q: 图标是随机的吗？**  
A: 是的，每次游戏从60个emoji中随机选择并打乱。

### 已知限制
- 无音效
- 无排行榜
- 无保存进度
- 无自定义图标

### 未来改进
- 🎵 添加音效
- 🏆 添加排行榜
- 💾 保存游戏进度
- 🎨 自定义主题
- 📊 详细统计图表
- 🎁 每日挑战

---

**准备好挑战连连看了吗？开始游戏吧！** 🔗✨🎯
