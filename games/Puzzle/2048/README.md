# 🎮 2048 | 数字游戏

合并相同数字，挑战 2048 方块！

## 📖 游戏简介

2048 是一款经典的数字合并益智游戏。在 4×4 的网格上，通过滑动方块使相同数字的方块碰撞并合并，合并后的数字等于两者之和。目标是不断合并，最终达到 2048！游戏支持键盘和触屏操作，自动保存最高分，挑战你的策略思维和规划能力！

### 游戏特色
- **经典玩法**：4×4网格，合并数字
- **双重控制**：键盘方向键 + 移动端按钮
- **11种方块**：从2到2048，渐变配色
- **最高分记录**：localStorage自动保存
- **平滑动画**：流畅的移动和合并效果
- **游戏说明**：内置帮助弹窗
- **响应式设计**：完美适配移动端
- **即时反馈**：胜利和失败提示

## 🎮 游戏玩法

### 基本操作

**键盘控制**（桌面）：
- ⬆️ **向上**：上方向键
- ⬇️ **向下**：下方向键
- ⬅️ **向左**：左方向键
- ➡️ **向右**：右方向键

**触屏控制**（移动端）：
- 点击屏幕下方的方向按钮
- 4个箭头对应4个方向

**重新开始**：
- 点击"🔄 重新开始"按钮

**查看帮助**：
- 点击"❓"帮助按钮

### 游戏规则

#### 基本规则

1. **移动方块**：
   - 每次操作，所有方块向指定方向滑动
   - 方块会滑到边界或碰到其他方块为止

2. **合并方块**：
   - 相同数字的方块碰撞时合并
   - 合并后数字 = 两个方块之和
   - 例如：2 + 2 = 4，4 + 4 = 8

3. **生成新方块**：
   - 每次移动后随机生成1个新方块
   - 90% 概率生成 **2**
   - 10% 概率生成 **4**
   - 在空白格子中随机位置

4. **分数计算**：
   - 每次合并获得分数
   - 分数 = 合并后的数字
   - 例如：合并成8获得8分

#### 胜负条件

**胜利**：
- 棋盘上出现 **2048** 方块
- 显示："🎉 恭喜你！达到 2048！"
- 可以继续游戏追求更高分

**失败**：
- 棋盘填满且无法合并
- 显示："😔 游戏结束！点击重新开始"

#### 方块数值序列

游戏中的方块按2的幂次递增：
```
2 → 4 → 8 → 16 → 32 → 64 → 128 → 256 → 512 → 1024 → 2048
```

### 游戏流程

1. **游戏开始**：
   - 4×4空白网格
   - 随机生成2个初始方块（2或4）

2. **玩家操作**：
   - 选择方向移动
   - 方块滑动到指定方向

3. **合并检查**：
   - 相同数字碰撞→合并
   - 分数累加

4. **生成新方块**：
   - 随机位置生成新方块（2或4）

5. **检查状态**：
   - 出现2048→胜利
   - 无法移动→失败
   - 否则继续游戏

6. **循环游戏**：
   - 重复步骤2-5

## 🖥️ 界面说明

### 游戏头部

**标题区**（左侧）：
- 图标：🎮（弹跳动画）
- 标题："2048"（3.5rem大字）
- 帮助按钮：❓（圆形，悬停旋转）

**分数区**（右侧）：
- **当前分数**：
  - 标签："当前分数"
  - 数值：实时更新
  - 背景：棕色

- **最高分**：
  - 标签："最高分"
  - 数值：localStorage保存
  - 背景：橙色渐变

### 游戏说明文字

居中显示：
- "合并相同数字，挑战 **2048** 方块！"
- 胜利时："🎉 恭喜你！达到 2048！"
- 失败时："😔 游戏结束！点击重新开始"

### 控制按钮

**重新开始按钮**：
- 图标：🔄
- 文字："重新开始"
- 样式：棕色背景，白色文字
- 效果：悬停上浮，点击下陷

### 游戏网格

**网格容器**：
- 尺寸：4×4
- 背景：#bbada0（棕灰色）
- 间距：12px
- 圆角：10px

**方块样式**：
- 正方形（aspect-ratio: 1）
- 圆角：6px
- 居中对齐
- 字体：2.5rem粗体

**方块颜色**（11种）：
- **2**：#eee4da（浅米色），深色文字
- **4**：#ede0c8（米色），深色文字
- **8**：#f2b179（浅橙色），白色文字
- **16**：#f59563（橙色），白色文字
- **32**：#f67c5f（深橙色），白色文字
- **64**：#f65e3b（红橙色），白色文字
- **128**：#edcf72（金黄色），白色文字，2.2rem
- **256**：#edcc61（深金色），白色文字，2.2rem
- **512**：#edc850（橙黄色），白色文字，2.2rem
- **1024**：#edc53f（黄色），白色文字，1.8rem
- **2048**：#edc22e（深黄色），白色文字，1.8rem

**空方块**：
- 背景：#cdc1b4（浅棕色）
- 无文字

### 移动端控制

**显示条件**：屏幕宽度 ≤ 768px

**方向按钮**（4个）：
- 布局：十字形
  - 上：顶部居中
  - 下、左、右：中间行
- 尺寸：60×60px
- 图标：SVG箭头
- 背景：半透明棕色
- 悬停：放大1.1倍
- 点击：缩小0.95倍

### 帮助弹窗

**触发方式**：
- 点击❓按钮
- 点击弹窗外部关闭
- 点击×关闭
- 点击"开始游戏"关闭

**弹窗内容**：

1. **头部**（橙色渐变背景）：
   - 标题："📖 游戏说明"
   - 关闭按钮：×

2. **主体**（可滚动）：
   - **🎯 游戏目标**：达到2048
   - **🕹️ 操作方式**：键盘/移动端
   - **📜 游戏规则**：5条规则
   - **💡 游戏技巧**：4条建议

3. **底部**：
   - "开始游戏"按钮（橙色）

## 🎨 视觉效果

### 配色方案
- **主色调**：棕色（#776e65）
- **背景色**：米色（#faf8ef）
- **网格背景**：#bbada0
- **强调色**：橙色（#f59563）
- **渐变背景**：米色渐变

### 动画效果

1. **弹跳动画**（bounce）：
   - 标题图标
   - 上下浮动5px
   - 2秒循环

2. **滑入动画**（slideIn）：
   - 帮助弹窗
   - 从上方滑入
   - 0.3秒

3. **平滑过渡**：
   - 方块移动：0.15s ease
   - 按钮悬停：0.3s ease
   - 分数更新：即时

### 特殊效果
- 阴影层次：sm/md/lg三级
- 按钮按压：3D效果（box-shadow偏移）
- 悬停效果：上浮 + 增强阴影
- 帮助按钮：旋转15度

## 📱 响应式支持

### 桌面设备（> 768px）
- 标题：3.5rem
- 方块字体：2.5rem
- 仅显示键盘提示
- 隐藏移动端按钮

### 平板/手机（≤ 768px）
- 标题：2.5rem
- 方块字体：2rem
- 显示移动端方向按钮
- 分数框缩小

### 小手机（≤ 480px）
- 标题：2rem
- 方块字体：1.8rem
- 容器内边距减小
- 1024/2048字体：1.4rem

## 🚀 快速开始

### 运行游戏
1. 在浏览器中打开 `index.html`
2. 使用方向键（或点击按钮）移动
3. 合并相同数字，挑战2048！

### 浏览器要求
- ✅ 支持 CSS Grid
- ✅ 支持 ES6 JavaScript
- ✅ 支持 localStorage
- ✅ Chrome / Edge / Firefox / Safari

## 💡 游戏技巧

### 基础策略

1. **角落策略**：
   - 把最大的数字放在角落（推荐右下角）
   - 次大的数字放在相邻位置
   - 保持最大数字不动

2. **顺序排列**：
   - 按从大到小排列（如右下→左下→右上）
   - 避免打乱顺序
   - 保持一致的移动方向

3. **避免分散**：
   - 不要让大数字分散在各处
   - 集中在一侧或一角
   - 减少碎片化

4. **提前规划**：
   - 思考下几步的走法
   - 避免死局
   - 预留合并空间

### 进阶技巧

**主要移动方向**：
- 确定2个主要移动方向（如右和下）
- 尽量只用这2个方向
- 迫不得已才用其他方向

**空间管理**：
- 保持至少1/4空间空白
- 避免填满整个棋盘
- 为新方块预留空间

**合并链**：
- 创造连续合并的机会
- 一次移动合并多对
- 最大化分数

**避免陷阱**：
- 不要让小数字困住大数字
- 注意方块生成位置
- 保持移动灵活性

## 🏆 挑战目标

### 方块挑战
- 🥉 **新手**：达到 128
- 🥈 **熟练**：达到 512
- 🥇 **高手**：达到 1024
- 💎 **大师**：达到 2048
- 👑 **传奇**：达到 4096+

### 分数挑战
- 🥉 **新手**：1,000 分
- 🥈 **熟练**：5,000 分
- 🥇 **高手**：10,000 分
- 💎 **大师**：20,000 分
- 👑 **传奇**：50,000 分+

### 效率挑战
- 用最少步数达到2048
- 用最短时间达到2048
- 挑战最高分记录

## 🔧 技术细节

### 网格系统

```javascript
// 4×4 网格，共16个格子
const width = 4;
let squares = []; // 16个div元素

// 索引布局：
// 0  1  2  3
// 4  5  6  7
// 8  9  10 11
// 12 13 14 15
```

### 移动算法

```javascript
// 向右移动示例
1. 提取一行的4个值
2. 过滤掉0，只保留数字
3. 0放左边，数字放右边
4. 更新格子内容

// 例如：[2, 0, 2, 4] → [0, 2, 2, 4]
```

### 合并算法

```javascript
// 检查相邻格子
if (square[i] === square[i+1] && square[i] !== 0) {
  // 合并
  square[i] = square[i] + square[i+1];
  square[i+1] = 0;
  score += square[i];
}
```

### 新方块生成

```javascript
// 90%概率生成2，10%概率生成4
const newValue = Math.random() < 0.9 ? 2 : 4;

// 随机空格子
const emptySquares = squares.filter(s => s.innerHTML === "");
const randomSquare = emptySquares[Math.floor(Math.random() * emptySquares.length)];
```

### 游戏结束检测

```javascript
// 1. 检查是否有空格
const hasEmpty = squares.some(s => !s.innerHTML);
if (hasEmpty) return; // 可以继续

// 2. 检查是否能合并（横向和纵向）
for (let i = 0; i < squares.length; i++) {
  // 检查右边
  if (i % 4 !== 3 && squares[i] === squares[i+1]) return;
  // 检查下边
  if (i < 12 && squares[i] === squares[i+4]) return;
}

// 无法移动→游戏结束
```

### 最高分存储

```javascript
// 保存
localStorage.setItem('game2048_highscore', highScore);

// 读取
const saved = localStorage.getItem('game2048_highscore');
highScore = saved ? parseInt(saved) : 0;
```

## 🐛 反馈与支持

### 常见问题

**Q: 如何获得高分？**  
A: 使用角落策略，把最大数字固定在角落，保持顺序排列。

**Q: 为什么有时会生成4？**  
A: 10%的概率会生成4，增加游戏难度和趣味性。

**Q: 达到2048后可以继续吗？**  
A: 可以！游戏不会强制结束，可以继续挑战更高数字。

**Q: 最高分会保存吗？**  
A: 会的，自动保存在浏览器localStorage中。

**Q: 可以撤销操作吗？**  
A: 不可以，每次移动都是最终决定。

**Q: 为什么方块不移动？**  
A: 如果没有空间或无法合并，方块不会移动。

**Q: 如何重置最高分？**  
A: 清除浏览器localStorage或在开发者工具中删除。

**Q: 移动端如何操作？**  
A: 点击屏幕下方的方向按钮。

**Q: 理论最大数字是多少？**  
A: 理论上可以无限大（2^n），实际受网格限制。

**Q: 合并顺序是怎样的？**  
A: 从移动方向开始，依次检查相邻方块。

### 已知限制
- 无撤销功能
- 无保存游戏进度
- 无动画关闭选项
- 无难度选择
- 无音效

### 性能优化建议
- 使用现代浏览器
- 游戏轻量级，无特殊要求

### 未来改进方向
- ⏮️ 撤销功能
- 💾 保存/加载游戏
- 🎵 音效和背景音乐
- 📊 详细统计（步数、时间）
- 🎨 主题切换
- 🏅 成就系统
- 🎯 每日挑战
- 👥 排行榜
- 📱 滑动手势支持
- 🎮 自定义网格大小（3×3、5×5）
- 🔢 自定义目标数字
- 📈 数据可视化

---

**准备好挑战2048了吗？开始游戏吧！** 🎮🎯✨
