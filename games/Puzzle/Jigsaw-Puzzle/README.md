# 🧩 Jigsaw Puzzle | 拼图游戏

拖拽拼图块，完成美丽的图片！

## 📖 游戏简介

Jigsaw Puzzle（拼图游戏）是一款经典的益智游戏。游戏将图片分割成多个小块并打乱，玩家需要通过点击交换相邻的拼图块，将它们重新拼接成完整的图片。游戏提供三种难度（3×3、4×4、5×5），支持原图预览、提示功能和完成度追踪，挑战你的空间思维和观察能力！

### 游戏特色
- **三种难度**：简单（3×3=9块）、普通（4×4=16块）、困难（5×5=25块）
- **点击交换**：点击相邻拼图块交换位置
- **原图预览**：随时查看/隐藏原图辅助拼图
- **提示功能**：高亮显示正确和错误的拼图块
- **实时统计**：用时、移动次数、完成度
- **Canvas渲染**：高质量拼图块显示
- **完成评价**：根据效率给出不同评价
- **响应式设计**：完美适配各种设备

## 🎮 游戏玩法

### 基本操作

**交换拼图块**：
1. 点击第一个拼图块（高亮选中）
2. 点击相邻的第二个拼图块
3. 两个拼图块交换位置
4. 重复操作直到完成

**相邻规则**：
- 只能交换**相邻**的拼图块
- 相邻定义：上下左右直接相邻（不包括对角）
- 不相邻的块无法交换

**查看原图**：
- 点击"👁️ 隐藏/显示"按钮
- 切换原图预览的显示状态

**使用提示**：
- 点击"💡 提示"按钮
- 正确位置的块：绿色边框
- 错误位置的块：橙色边框
- 3秒后提示消失

**打乱拼图**：
- 点击"🔀 打乱"按钮
- 重新随机打乱所有拼图块

### 游戏规则

#### 三种难度

**🟢 简单（Easy）**：
- 网格大小：3×3
- 拼图块数：9块
- 理想移动：18次
- 适合：新手玩家

**🟡 普通（Normal，默认）**：
- 网格大小：4×4
- 拼图块数：16块
- 理想移动：32次
- 适合：普通玩家

**🔴 困难（Hard）**：
- 网格大小：5×5
- 拼图块数：25块
- 理想移动：50次
- 适合：高级玩家

#### 统计系统

**⏱️ 用时**：
- 格式：MM:SS
- 从开始游戏后计时
- 完成后停止
- 0.1秒精度

**🎯 移动次数**：
- 每次成功交换 = 1次移动
- 点击不相邻的块不计数
- 重复点击同一块取消选中，不计数

**✨ 完成度**：
- 计算公式：(正确位置块数 / 总块数) × 100%
- 实时更新
- 100% = 完成

#### 拼图块状态

**默认状态**：
- 灰色背景框
- 浅阴影
- 可点击

**选中状态**：
- 橙色边框（3px）
- 橙色光晕
- 放大1.08倍

**悬停状态**：
- 放大1.05倍
- 增强阴影

**提示状态**：
- 正确位置：绿色边框 + 脉冲动画
- 错误位置：橙色边框 + 抖动动画
- 持续3秒

#### 完成条件

**胜利**：
- 所有拼图块都在正确位置
- 完成度达到100%
- 显示完成弹窗

**评价等级**（基于移动次数）：
- **理想移动** = 网格大小² × 2
- ≤ 理想移动：🏆 完美！效率极高！
- ≤ 理想移动 × 1.5：🌟 很棒！拼图高手！
- ≤ 理想移动 × 2：👍 不错！继续加油！
- > 理想移动 × 2：💪 完成了！多练习会更好！

### 游戏流程

1. **选择难度**：点击难度按钮（游戏前）
2. **开始游戏**：点击"开始游戏"
3. **拼图打乱**：自动打乱所有拼图块
4. **观察拼图**：查看原图预览
5. **交换拼图**：
   - 点击第一个块
   - 点击相邻的第二个块
   - 交换位置
6. **查看进度**：观察完成度百分比
7. **继续拼图**：重复步骤5-6
8. **完成游戏**：完成度达到100%
9. **查看结果**：用时、移动次数、评价

## 🖥️ 界面说明

### 游戏头部
- **图标**：🧩（旋转动画）
- **标题**："Jigsaw Puzzle"（渐变文字）
- **副标题**："拖拽拼图块，完成美丽的图片！"

### 统计卡片（3张）

1. **⏱️ 用时**：
   - 格式：MM:SS
   - 黄色渐变背景
   - 紫色数字

2. **🎯 移动次数**：
   - 整数显示
   - 每次交换+1

3. **✨ 完成度**：
   - 百分比显示
   - 实时更新

### 难度选择区

**3个按钮**（横向排列）：
- 🟢 简单 (3×3)
- 🟡 普通 (4×4，默认）
- 🔴 困难 (5×5)

**按钮状态**：
- 未激活：白底 + 灰色边框
- 激活：紫色渐变 + 白色文字
- 游戏中无法切换

### 游戏区域

**原图预览区**：
- 标签："原图预览"
- 切换按钮："👁️ 隐藏/显示"
- Canvas显示完整原图
- 隐藏时：模糊+透明度0.3

**拼图板**：
- 网格布局（2px间距）
- 灰色背景
- 居中显示
- 动态调整大小

### 拼图块

**尺寸**：
- 根据难度自适应
- 简单：约133×133px
- 普通：约100×100px
- 困难：约80×80px

**显示**：
- Canvas渲染
- 显示对应图片区域
- 圆角：4px
- 阴影效果

### 控制按钮（4个）

**交替显示**：
1. **▶️ 开始游戏**（紫色渐变）
   - 初始显示
   - 点击后隐藏

2. **🔀 打乱**（紫色渐变）
   - 游戏中显示
   - 重新打乱拼图

3. **💡 提示**（青色渐变）
   - 游戏中显示
   - 高亮正确/错误块

4. **🔄 重新开始**（橙色渐变）
   - 游戏中显示
   - 重置游戏

### 游戏说明

**紫色渐变背景**，5条说明：
- 点击相邻的两个拼图块进行交换位置
- 将所有拼图块拼接到正确位置
- 完成度达到100%即通关
- 可随时查看原图预览辅助拼图
- 使用提示功能高亮显示错误位置

### 完成弹窗

**显示时机**：完成度达到100%

**弹窗内容**：

**图标**：
- 🎉（弹跳动画）

**标题**：
- "恭喜完成！"

**统计信息**（2项）：
- **用时**：MM:SS格式
- **移动次数**：整数

**评价信息**（根据效率）：
- 🏆 完美！效率极高！
- 🌟 很棒！拼图高手！
- 👍 不错！继续加油！
- 💪 完成了！多练习会更好！

**再玩一次按钮**：
- 紫色渐变
- 重新开始游戏

## 🎨 视觉效果

### 配色方案
- **主色调**：紫色（#8b5cf6）
- **次色调**：粉色（#ec4899）
- **强调色**：橙色（#f59e0b）
- **成功色**：绿色（#10b981）
- **背景渐变**：#8b5cf6 → #ec4899

### 默认图片

**程序生成的渐变图**：
- 背景：紫色 → 粉色 → 橙色渐变
- 装饰：10个随机半透明圆圈
- 中心：🧩 emoji（60px）
- 尺寸：400×400px

### 动画效果

1. **旋转动画**（rotate）：头部图标
2. **脉冲动画**（correctPulse）：正确拼图块
3. **抖动动画**（wrongShake）：错误拼图块
4. **弹跳动画**（modalIconBounce）：完成图标
5. **模态框动画**：淡入 + 滑入

### 交互效果
- 悬停放大：1.05倍
- 选中放大：1.08倍
- 橙色光晕：选中时
- 平滑过渡：0.3秒

## 📱 响应式支持

### 桌面（> 768px）
- 统计卡片：自适应3列
- 难度按钮：横向排列
- 控制按钮：横向排列

### 平板/手机（≤ 768px）
- 统计卡片：单列
- 难度按钮：垂直排列，全宽
- 控制按钮：垂直排列，全宽

### 小手机（≤ 480px）
- 字体缩小
- 内边距减小

## 🚀 快速开始

### 运行游戏
1. 在浏览器中打开 `index.html`
2. 选择难度
3. 点击开始游戏
4. 点击相邻拼图块交换位置！

### 浏览器要求
- ✅ 支持 Canvas API
- ✅ 支持 ES6 JavaScript
- ✅ 支持 CSS Grid
- ✅ Chrome / Edge / Firefox / Safari

## 💡 游戏技巧

### 基础策略

1. **从边角开始**：
   - 先拼四个角的拼图块
   - 再拼边缘的拼图块
   - 最后拼中间部分

2. **分区拼图**：
   - 将图片分成几个区域
   - 先完成一个区域
   - 逐步扩展

3. **观察特征**：
   - 注意图片的颜色分布
   - 记住明显的图案和边界
   - 利用渐变方向

4. **使用预览**：
   - 经常对照原图
   - 确认拼图块的正确位置
   - 发现错误及时调整

### 进阶技巧

**减少移动次数**：
- 提前规划移动路径
- 避免无效交换
- 一次移动解决多个块

**提高速度**：
- 熟悉拼图块的位置
- 快速识别相邻关系
- 减少思考时间

**使用提示**：
- 卡住时使用提示
- 找出错误的拼图块
- 优先修正错误位置

**打乱策略**：
- 如果混乱无序，可以重新打乱
- 有时重新开始更高效

## 🏆 挑战目标

### 完成挑战
- 🥉 **新手**：完成简单难度
- 🥈 **熟练**：完成普通难度
- 🥇 **高手**：完成困难难度

### 效率挑战（普通难度）
- 🥉 **新手**：≤ 64次移动
- 🥈 **熟练**：≤ 48次移动
- 🥇 **高手**：≤ 32次移动（理想）
- 💎 **完美**：≤ 24次移动

### 速度挑战（普通难度）
- 🥉 **新手**：≤ 5分钟
- 🥈 **熟练**：≤ 3分钟
- 🥇 **高手**：≤ 2分钟
- ⚡ **闪电**：≤ 1分钟

## 🔧 技术细节

### 拼图生成

```javascript
// 根据难度设置网格大小
const gridSize = difficulties[currentDifficulty].gridSize;

// 计算每块大小
pieceSize = Math.floor(puzzleImage.width / gridSize);

// 创建拼图数据
for (let row = 0; row < gridSize; row++) {
  for (let col = 0; col < gridSize; col++) {
    const piece = {
      id: row * gridSize + col,
      correctRow: row,
      correctCol: col,
      currentRow: row,
      currentCol: col
    };
  }
}
```

### 打乱算法

```javascript
// Fisher-Yates 洗牌算法
for (let i = puzzlePieces.length - 1; i > 0; i--) {
  const j = Math.floor(Math.random() * (i + 1));
  // 交换位置
  [pieces[i].currentRow, pieces[j].currentRow] = 
  [pieces[j].currentRow, pieces[i].currentRow];
  [pieces[i].currentCol, pieces[j].currentCol] = 
  [pieces[j].currentCol, pieces[i].currentCol];
}
```

### 相邻检测

```javascript
// 检查是否相邻（横向或纵向）
const rowDiff = Math.abs(piece1.currentRow - piece2.currentRow);
const colDiff = Math.abs(piece1.currentCol - piece2.currentCol);

const isAdjacent = (rowDiff === 1 && colDiff === 0) || 
                   (rowDiff === 0 && colDiff === 1);
```

### Canvas渲染

```javascript
// 绘制拼图块
ctx.drawImage(
  puzzleImage,
  piece.correctCol * pieceSize,  // 源x
  piece.correctRow * pieceSize,  // 源y
  pieceSize,                     // 源宽度
  pieceSize,                     // 源高度
  0,                             // 目标x
  0,                             // 目标y
  pieceSize,                     // 目标宽度
  pieceSize                      // 目标高度
);
```

### 完成度计算

```javascript
const correctCount = puzzlePieces.filter(piece => 
  piece.currentRow === piece.correctRow && 
  piece.currentCol === piece.correctCol
).length;

const percentage = Math.round((correctCount / puzzlePieces.length) * 100);
```

### 理想移动计算

```javascript
const idealMoves = gridSize * gridSize * 2;

// 简单(3×3): 9 × 2 = 18次
// 普通(4×4): 16 × 2 = 32次
// 困难(5×5): 25 × 2 = 50次
```

## 🐛 反馈与支持

### 常见问题

**Q: 如何交换拼图块？**  
A: 点击第一个块选中，再点击相邻的第二个块进行交换。

**Q: 什么是相邻？**  
A: 上下左右直接相邻的拼图块，不包括对角线。

**Q: 为什么有些块无法交换？**  
A: 只能交换相邻的块，不相邻的块无法交换。

**Q: 如何查看原图？**  
A: 点击"👁️ 显示"按钮可以显示/隐藏原图预览。

**Q: 提示功能是什么？**  
A: 点击"💡 提示"会高亮显示正确位置（绿色）和错误位置（橙色）的拼图块。

**Q: 可以更换图片吗？**  
A: 当前版本使用程序生成的默认图片，暂不支持自定义图片。

**Q: 如何获得高评价？**  
A: 用更少的移动次数完成拼图，≤理想移动次数可获得完美评价。

**Q: 游戏中可以切换难度吗？**  
A: 不可以，需要重新开始游戏后才能切换难度。

**Q: 打乱按钮有什么用？**  
A: 重新随机打乱所有拼图块，但不重置用时和移动次数。

**Q: 完成度是如何计算的？**  
A: (正确位置的拼图块数 / 总拼图块数) × 100%

### 已知限制
- 无自定义图片上传
- 无撤销功能
- 无保存进度
- 无最佳成绩记录
- 无音效

### 性能优化建议
- 使用现代浏览器
- 游戏轻量级，无特殊要求

### 未来改进方向
- 📷 自定义图片上传
- ⏮️ 撤销功能
- 💾 保存/加载进度
- 🏆 最佳成绩记录
- 🎵 音效和背景音乐
- 📊 详细统计图表
- 🎨 更多难度选项（6×6、7×7）
- 🖼️ 预设图片库
- 🎁 成就系统
- 👥 多人协作模式
- 📱 拖拽手势支持

---

**准备好挑战拼图了吗？开始游戏吧！** 🧩🎯✨
