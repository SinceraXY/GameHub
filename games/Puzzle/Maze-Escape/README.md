# 🎯 Maze Escape | 迷宫逃脱

找到出口，赢得胜利！

## 📖 游戏简介

Maze Escape（迷宫逃脱）是一款经典的迷宫益智游戏。玩家需要从绿色的起点出发，找到通往红色终点的路径，成功逃出迷宫。游戏使用深度优先搜索（DFS）算法随机生成迷宫，每次游戏都有不同的挑战。提供三种难度，支持提示系统和步数追踪，挑战你的方向感和策略思维！

### 游戏特色
- **随机迷宫**：DFS算法生成，每次不同
- **三种难度**：简单（10×10）、中等（15×15）、困难（20×20）
- **双控制模式**：键盘（方向键/WASD）+ 移动端方向按钮
- **智能提示**：3次提示机会，显示3-8步最优路径
- **Canvas渲染**：实时绘制迷宫、玩家、路径
- **粒子特效**：移动、胜利、碰撞特效
- **音效系统**：移动、碰墙、提示、胜利音效
- **访问追踪**：显示已走过的路径
- **死胡同设计**：增加迷宫复杂度

## 🎮 游戏玩法

### 基本操作

**键盘控制**（桌面）：
- **方向键**：⬆️ ⬇️ ⬅️ ➡️
- **WASD**：W（上）、S（下）、A（左）、D（右）

**触屏控制**（移动端）：
- 点击屏幕下方的方向按钮
- 十字方向键布局

**重置关卡**：
- 点击"🔄 重置"按钮
- 玩家回到起点，步数重置
- 迷宫布局保持不变

**使用提示**：
- 点击"💡 提示"按钮
- 消耗1次提示机会（共3次）
- 显示3-8步最优路径

**跳过关卡**：
- 点击"⏭️ 下一关"按钮
- 生成新的迷宫

**返回菜单**：
- 点击"🏠 选择难度"按钮
- 重新选择难度

### 游戏规则

#### 游戏目标

**胜利条件**：
- 从起点（绿色方块）移动到终点（红色方块）
- 找到正确的路径穿过迷宫

#### 三种难度

**🟢 简单（Easy）**：
- 迷宫大小：10×10
- 格子数：100个
- 路径相对简单
- 适合：新手玩家

**🟡 中等（Normal）**：
- 迷宫大小：15×15
- 格子数：225个
- 路径复杂度中等
- 适合：普通玩家

**🔴 困难（Hard）**：
- 迷宫大小：20×20
- 格子数：400个
- 路径非常复杂
- 适合：高级玩家

#### 迷宫元素

**墙壁**（深灰色）：
- 无法通过
- 碰撞时有粒子特效
- 渐变阴影效果

**路径**（浅灰色）：
- 可以通过
- 连接起点和终点

**起点**（绿色）：
- 玩家初始位置
- 左上角（0, 0）

**终点**（红色）：
- 目标位置
- 右下角（mazeSize-1, mazeSize-1）
- 带星星装饰

**玩家**（蓝色圆圈）：
- 移动的角色
- 笑脸表情

**已访问路径**（灰色）：
- 玩家走过的格子
- 半透明显示

**提示路径**（橙色）：
- 显示最优路径
- 3秒后消失

#### 移动规则

**合法移动**：
- 只能移动到相邻的路径格子
- 移动方向：上、下、左、右
- 不能穿过墙壁
- 不能走出边界

**步数统计**：
- 每次移动 = 1步
- 包含所有移动（包括走错路）
- 用最少步数是挑战目标

**粒子效果**：
- 移动：5个蓝色粒子
- 碰墙：3个红色粒子
- 胜利：30个彩色粒子（延迟生成）

### 提示系统

**提示次数**：
- 每关开始：3次
- 使用后不恢复
- 剩余次数实时显示

**提示内容**：
- 从当前位置到终点的最优路径
- 显示步数：3-8步
- 橙色高亮路径
- 3秒后自动隐藏

**智能提示算法**：
- 使用BFS寻找最短路径
- 计算显示步数：
  - 最少显示3步
  - 最多显示8步
  - 至少包含一个拐弯或路口
- 动态适应迷宫布局

**提示显示逻辑**：
1. 找到第一个拐弯→显示到拐弯后2步
2. 找到路口（>2个方向）→显示到路口后2步
3. 无拐弯/路口→显示3-6步随机

### 统计系统

**🎯 关卡**：
- 从1开始递增
- 每次下一关+1

**👣 步数**：
- 总移动次数
- 越少越好
- 有缩放动画

**⏱️ 时间**：
- 格式：MM:SS
- 从开始计时
- 完成后停止

**💡 提示**：
- 剩余提示次数
- 初始3次
- 使用后减少

## 🖥️ 界面说明

### 游戏头部
- **标题**："🎯 Maze Escape"（渐变文字）
- **副标题**："迷宫逃脱 - 找到出口，赢得胜利！"

### 信息栏（4项）

1. **关卡**：
   - 当前关卡数
   - 紫色渐变背景

2. **步数**：
   - 移动次数
   - 移动时缩放动画

3. **时间**：
   - MM:SS格式
   - 每秒更新

4. **提示**：
   - 剩余提示次数
   - 初始3次

### 游戏区域

**Canvas画布**：
- 动态尺寸：mazeSize × cellSize
- cellSize = 30px
- 圆角边框
- 阴影效果

**迷宫绘制**：
- 墙壁：渐变深灰（#34495e → #2c3e50）
- 路径：浅灰（#ecf0f1）
- 已访问：半透明灰（#95a5a6, alpha 0.3）

**特殊元素**：
- 起点：绿色方块（#2ecc71）
- 终点：红色方块（#e74c3c）+ 金色星星
- 玩家：蓝色圆圈（#3498db）+ 笑脸
- 提示路径：橙色高亮（#f39c12）

**覆盖提示**：
- 位置：画布中央
- 文字："使用方向键或WASD移动"
- 紫色渐变背景
- 浮动 + 淡入淡出动画

### 控制按钮（4个）

1. **🔄 重置**：
   - 回到起点
   - 迷宫不变
   - 紫色渐变

2. **💡 提示**：
   - 显示路径
   - 消耗次数
   - 紫色渐变

3. **🏠 选择难度**：
   - 返回菜单
   - 重新选择
   - 紫色渐变

4. **⏭️ 下一关**：
   - 新迷宫
   - 关卡+1
   - 紫色渐变

### 移动端方向键

**显示条件**：屏幕宽度 ≤ 768px

**十字布局**：
- 上：第1行中间
- 下：第3行中间
- 左：第2行左侧
- 右：第2行右侧
- 中央：装饰（🎮）

**按钮样式**：
- 尺寸：70×70px
- 紫色渐变
- 点击缩放效果

### 游戏说明

**🎯 游戏目标**：
- "从起点（绿色）到达终点（红色），用最少的步数通关！"

**🎮 操作方式**：
- "电脑：使用方向键或WASD移动 | 手机：点击屏幕方向按钮"

### 开始遮罩

**显示时机**：游戏加载时

**内容**：
- 标题："🎯 Maze Escape"
- 副标题："准备好挑战迷宫了吗？"
- "开始游戏"按钮（紫色）
- 难度选择（3个按钮）

**难度卡片**：
- 简单：10×10迷宫
- 中等：15×15迷宫
- 困难：20×20迷宫

### 胜利弹窗

**显示时机**：到达终点

**特效**：
- 30个彩色粒子爆发
- 三音符胜利音效

**弹窗头部**：
- 图标：🏆（弹跳动画）
- 标题："恭喜过关！"
- 副标题："又成功逃出了一个迷宫！"
- 紫色渐变背景 + 光晕动画

**统计信息**（4项）：
- 关卡编号
- 步数
- 用时
- 提示使用次数

**两个按钮**：
- "⏭️ 下一关"（紫色）
- "🔄 重玩"（白底紫边）

## 🎨 视觉效果

### 配色方案
- **主色调**：紫色（#667eea）
- **次色调**：深紫（#764ba2）
- **墙壁**：深灰（#2c3e50）
- **路径**：浅灰（#ecf0f1）
- **起点**：绿色（#2ecc71）
- **终点**：红色（#e74c3c）
- **玩家**：蓝色（#3498db）
- **提示**：橙色（#f39c12）
- **已访问**：灰色（#95a5a6）

### 动画效果

1. **浮动动画**（float）：覆盖提示
2. **淡入淡出**（fadeInOut）：覆盖提示
3. **弹跳动画**（trophyBounce）：奖杯图标
4. **光晕动画**（headerGlow）：弹窗头部
5. **缩放动画**：步数更新
6. **粒子系统**：移动和胜利

### 粒子特效

**移动粒子**：
- 数量：5个
- 颜色：蓝色
- 生命周期：50帧
- 随机方向运动

**碰墙粒子**：
- 数量：3个
- 颜色：红色
- 碰撞反馈

**胜利粒子**：
- 数量：30个
- 颜色：5种（红、橙、绿、蓝、紫）
- 延迟生成：每20ms一个
- 爆炸效果

**粒子物理**：
- 随机速度：(-0.5, 0.5) × 4
- 无重力
- 透明度衰减：0.02/帧
- 生命值衰减：0.02/帧

### 音效系统

**移动音效**：
- 频率：400Hz
- 类型：正弦波
- 时长：0.1秒

**碰墙音效**：
- 频率：150Hz
- 类型：锯齿波
- 时长：0.15秒

**提示音效**：
- 频率：600Hz
- 类型：三角波
- 时长：0.3秒

**胜利音效**：
- 三个音符：523Hz、659Hz、784Hz
- 间隔：0.15秒
- 时长：0.4秒/音符

## 📱 响应式支持

### 桌面（> 768px）
- 信息栏：4列
- 隐藏移动端方向键
- 控制按钮：横向排列

### 平板/手机（≤ 768px）
- 信息栏：2×2网格
- 显示移动端方向键
- 控制按钮：2×2网格
- Canvas自适应宽度

### 小手机（≤ 480px）
- 字体缩小
- 方向键：60×60px
- 容器内边距减小

## 🚀 快速开始

### 运行游戏
1. 在浏览器中打开 `index.html`
2. 选择难度
3. 点击"开始游戏"
4. 使用方向键或WASD移动，找到出口！

### 浏览器要求
- ✅ 支持 Canvas API
- ✅ 支持 ES6 JavaScript
- ✅ 支持 Web Audio API
- ✅ Chrome / Edge / Firefox / Safari

## 💡 游戏技巧

### 基础策略

1. **观察全局**：
   - 先不急着移动
   - 观察迷宫整体布局
   - 找出大致方向

2. **靠墙走法**：
   - 选择一侧墙壁（左或右）
   - 始终沿着墙壁移动
   - 理论上能走出任何迷宫

3. **记住路径**：
   - 记住已经走过的路
   - 避免重复走死胡同
   - 利用已访问路径显示

4. **使用提示**：
   - 卡住时使用提示
   - 记住提示的方向
   - 节省提示次数

### 进阶技巧

**最优路径策略**：
- 尽量朝终点大致方向移动
- 遇到岔路选择更接近终点的方向
- 减少绕路和回头

**死胡同识别**：
- 注意只有一个出口的路径
- 进入前先观察是否通向终点
- 及时返回避免浪费步数

**提示有效利用**：
- 第一次提示：了解大致方向
- 第二次提示：通过复杂路口
- 第三次提示：最后冲刺

**减少步数**：
- 避免无效移动
- 规划好路线再移动
- 挑战最优解

### 各难度攻略

**简单（10×10）**：
- 迷宫较小，路径简单
- 靠墙走法即可
- 目标：100步内完成

**中等（15×15）**：
- 迷宫中等，有死胡同
- 需要一定规划
- 目标：200步内完成

**困难（20×20）**：
- 迷宫很大，路径复杂
- 建议使用提示
- 目标：350步内完成

## 🏆 挑战目标

### 完成挑战
- 🥉 **新手**：完成简单难度
- 🥈 **熟练**：完成中等难度
- 🥇 **高手**：完成困难难度

### 步数挑战（不用提示）
- 🥉 **新手**：简单 < 150步
- 🥈 **熟练**：中等 < 250步
- 🥇 **高手**：困难 < 400步
- 💎 **大师**：困难 < 300步

### 速度挑战
- ⚡ **简单**：< 1分钟
- ⚡ **中等**：< 3分钟
- ⚡ **困难**：< 5分钟

### 完美挑战
- 🏆 不使用任何提示完成所有难度
- 🏆 用最优路径（BFS路径长度）完成

## 🔧 技术细节

### 迷宫生成算法（DFS）

```javascript
// 初始化全是墙
maze = Array(mazeSize).fill(null).map(() => Array(mazeSize).fill(1));

// 从起点开始DFS
const stack = [startPos];
maze[startPos.y][startPos.x] = 0;

while (stack.length > 0) {
  const current = stack[stack.length - 1];
  const neighbors = getUnvisitedNeighbors(current);
  
  if (neighbors.length === 0) {
    stack.pop();
  } else {
    const next = neighbors[Math.floor(Math.random() * neighbors.length)];
    // 移除中间的墙
    const wallX = Math.floor(current.x + (next.x - current.x) / 2);
    const wallY = Math.floor(current.y + (next.y - current.y) / 2);
    maze[wallY][wallX] = 0;
    maze[next.y][next.x] = 0;
    stack.push(next);
  }
}
```

### 寻路算法（BFS）

```javascript
function findPath() {
  const queue = [{ ...startPos, path: [startPos] }];
  const visited = Array(mazeSize).fill(null).map(() => Array(mazeSize).fill(false));
  visited[startPos.y][startPos.x] = true;
  
  while (queue.length > 0) {
    const current = queue.shift();
    
    if (current.x === endPos.x && current.y === endPos.y) {
      return current.path; // 找到最短路径
    }
    
    const neighbors = getValidNeighbors(current);
    for (let next of neighbors) {
      if (!visited[next.y][next.x]) {
        visited[next.y][next.x] = true;
        queue.push({
          x: next.x,
          y: next.y,
          path: [...current.path, next]
        });
      }
    }
  }
  
  return [];
}
```

### 死胡同生成

```javascript
// 在现有路径基础上添加死胡同
const deadEndCount = Math.floor(mazeSize * 1.5);

// 确保死胡同：
// 1. 不连接到正确路径
// 2. 只有一个出口
// 3. 周围除来的方向外都是墙
```

### 提示步数计算

```javascript
function calculateHintSteps(path) {
  let minSteps = 3; // 最少3步
  let maxSteps = Math.min(8, path.length); // 最多8步
  
  // 查找第一个拐弯或路口
  for (let i = 1; i < path.length - 1 && i < maxSteps; i++) {
    // 检查方向改变（拐弯）
    if (方向改变) {
      return Math.max(i + 2, minSteps);
    }
    
    // 检查路口（>2个方向）
    const choices = countAvailableDirections(curr);
    if (choices > 2) {
      return Math.max(i + 2, minSteps);
    }
  }
  
  return 随机3-6步;
}
```

## 🐛 反馈与支持

### 常见问题

**Q: 迷宫是随机生成的吗？**  
A: 是的，每次游戏都使用DFS算法生成新的迷宫。

**Q: 提示显示多少步？**  
A: 3-8步，取决于路径中的拐弯和路口位置。

**Q: 提示次数可以恢复吗？**  
A: 不可以，每关固定3次，用完就没有了。

**Q: 如何重玩当前关卡？**  
A: 点击"重置"按钮回到起点，迷宫布局不变。

**Q: 移动端如何控制？**  
A: 点击屏幕下方的十字方向键。

**Q: 为什么碰不到墙？**  
A: 墙壁无法通过，只能走路径（浅色区域）。

**Q: 已访问路径是什么？**  
A: 走过的格子会显示为半透明灰色，帮助记忆。

**Q: 如何获得最少步数？**  
A: 提示显示的是最优路径，按提示走步数最少。

**Q: 迷宫一定有解吗？**  
A: 是的，生成算法保证从起点到终点有路径。

**Q: 可以对角移动吗？**  
A: 不可以，只能上下左右移动。

### 已知限制
- 无保存进度
- 无最佳记录
- 无撤销功能
- 无自动寻路

### 性能优化建议
- 使用现代浏览器
- Canvas硬件加速
- 困难模式需要更多计算

### 未来改进方向
- 💾 保存进度和最佳记录
- ⏮️ 撤销功能
- 🤖 自动寻路演示
- 🎨 更多主题和皮肤
- 🏅 成就系统
- 📊 详细统计
- 🎯 每日挑战
- 👥 多人竞速模式
- 🗺️ 自定义迷宫编辑器
- 🎵 更丰富的音效和音乐

---

**准备好挑战迷宫了吗？开始游戏吧！** 🎯🗺️✨
