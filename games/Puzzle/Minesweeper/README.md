# 💣 Minesweeper Game | 扫雷游戏

经典益智游戏，找出所有地雷，挑战你的逻辑推理能力！

## 📖 游戏简介

Minesweeper（扫雷）是一款经典的单人益智游戏。玩家需要在方格棋盘上找出所有不含地雷的方块，同时避免踩到地雷。通过方块上显示的数字（表示周围8个方块中的地雷数量）进行逻辑推理，标记地雷位置并翻开安全方块。游戏提供三种难度，支持标记模式和计时功能，挑战你的推理和决策能力！

### 游戏特色
- **三种难度**：简单（8×8，10雷）、中等（12×12，20雷）、困难（16×16，40雷）
- **首次点击保护**：第一次点击绝不会踩到地雷，且自动展开安全区域
- **双击击模式**：左键翻开 + 右键/标记模式插旗
- **智能递归展开**：空白方块自动展开周围安全区域
- **实时统计**：剩余地雷、游戏时间、已标记数量
- **标记模式**：切换标记模式便于手机端操作
- **精美UI**：现代化界面，渐变配色，流畅动画
- **响应式设计**：完美适配桌面和移动端

## 🎮 游戏玩法

### 基本操作

**桌面端**：
- **左键点击**：翻开方块
- **右键点击**：插旗标记地雷

**移动端 / 标记模式**：
- **点击方块**：翻开方块
- **开启标记模式**：点击"标记模式"按钮后，点击方块插旗
- **关闭标记模式**：再次点击"标记模式"按钮

**控制按钮**：
- **🚩 标记模式**：切换标记/翻开模式
- **🔄 重新开始**：重置当前难度游戏

**查看规则**：
- 点击右上角"游戏规则"按钮
- 侧边栏滑出显示详细规则

### 游戏规则

#### 游戏目标

**胜利条件**：
- 翻开所有不含地雷的方块
- 剩余方块数 = 地雷数量

**失败条件**：
- 点击到地雷方块
- 游戏结束，显示所有地雷位置

#### 三种难度

**🙂 简单（Easy）**：
- 棋盘大小：8×8
- 方块总数：64个
- 地雷数量：10个
- 适合：新手玩家

**😐 中等（Medium）**：
- 棋盘大小：12×12
- 方块总数：144个
- 地雷数量：20个
- 适合：普通玩家

**☹️ 困难（Hard）**：
- 棋盘大小：16×16
- 方块总数：256个
- 地雷数量：40个
- 适合：高级玩家

#### 方块状态

**未翻开方块**（灰色）：
- 初始状态
- 可以点击翻开或标记

**已标记方块**（金红渐变 + 🚩）：
- 玩家标记的疑似地雷位置
- 再次右键点击取消标记
- 已标记方块无法直接翻开

**已翻开方块**（浅色）：
- 显示数字（周围地雷数）
- 或空白（周围无地雷）
- 无法再次点击

**地雷方块**（粉红渐变 + 💣）：
- 游戏失败时显示
- 所有地雷位置揭示
- 爆炸动画效果

#### 数字含义

方块上的数字表示其周围8个方块（上下左右 + 四个对角）中的地雷数量：

- **空白**：周围无地雷，自动展开相邻方块
- **1**：蓝色，周围有1个地雷
- **2**：绿色，周围有2个地雷
- **3**：红色，周围有3个地雷
- **4**：深蓝色，周围有4个地雷
- **5**：棕色，周围有5个地雷
- **6**：青色，周围有6个地雷
- **7**：黑色，周围有7个地雷
- **8**：灰色，周围有8个地雷

#### 首次点击保护

**安全机制**：
- 第一次点击永远不会踩到地雷
- 点击位置及周围3×3区域都不会生成地雷
- 确保游戏有一个安全的开局

**地雷生成时机**：
- 游戏初始化时不生成地雷
- 第一次点击后才生成地雷
- 排除首次点击区域（3×3）

### 统计系统

**💣 剩余地雷**：
- 总地雷数 - 已标记旗帜数
- 可能显示负数（标记过多时）
- 最小显示0

**⏱️ 时间**：
- 格式：秒数（如"0s"、"45s"）
- 从第一次点击开始计时
- 游戏结束后停止

**🚩 已标记**：
- 当前插旗的方块数量
- 标记时+1，取消标记时-1

### 推理技巧

#### 基础推理

**确定地雷**：
- 如果数字=周围未翻开方块数，则全是地雷
- 例如：数字3，周围剩3个未翻开方块→全部标记

**确定安全**：
- 如果数字=周围已标记旗帜数，其他方块全安全
- 例如：数字2，周围已标记2个旗帜→其他方块可翻开

**组合推理**：
- 利用多个数字的组合关系
- 通过排除法确定地雷位置

#### 进阶技巧

**1-2-1模式**：
- 当出现1-2-1横向或纵向排列时
- 中间数字2的两侧必有地雷

**角落技巧**：
- 角落的方块只有3个相邻
- 推理相对简单

**边缘优先**：
- 先从边缘和角落开始
- 信息更集中，推理更简单

**标记习惯**：
- 养成标记的好习惯
- 帮助记忆和推理

## 🖥️ 界面说明

### 游戏头部

**左侧**：
- 图标：💣
- 标题："Minesweeper Game"
- 特殊字体：Fredoka One

**右侧**：
- "游戏规则"按钮（紫色渐变）
- 点击展开规则侧边栏

### 统计面板（3张卡片）

1. **💣 剩余地雷**：
   - 总地雷数 - 已标记数
   - 实时更新

2. **⏱️ 时间**：
   - 游戏用时（秒）
   - 每秒更新

3. **🚩 已标记**：
   - 当前标记的旗帜数量

### 难度选择面板

**3个难度按钮**：
- **🙂 简单**：8×8 / 10雷
- **😐 中等**：12×12 / 20雷
- **☹️ 困难**：16×16 / 40雷

**按钮状态**：
- 未选中：白色背景
- 选中：紫色渐变背景 + 紫色边框

### 游戏棋盘

**布局**：
- 网格布局（gap: 2px）
- 浅灰背景
- 圆角边框
- 阴影效果

**方块尺寸**：
- 桌面：45×45px
- 移动端：35×35px

**方块样式**：
- 未翻开：灰色（#cbd5e0）
- 已翻开：浅色（#edf2f7）
- 已标记：金红渐变 + 🚩
- 地雷：粉红渐变 + 💣

**悬停效果**：
- 未翻开方块：变深 + 缩小0.95倍

**数字颜色**：
- 1：蓝色（#3182ce）
- 2：绿色（#38a169）
- 3：红色（#e53e3e）
- 4：深蓝（#2c5282）
- 5：棕色（#9c4221）
- 6：青色（#2c7a7b）
- 7：黑色（#000000）
- 8：灰色（#718096）

### 控制面板（2个按钮）

1. **🚩 标记模式**：
   - 默认：紫色渐变
   - 激活：黄粉渐变
   - 点击切换模式

2. **🔄 重新开始**：
   - 紫色渐变
   - 重置游戏

### 规则侧边栏

**显示方式**：
- 从左侧滑入
- 黑色半透明背景
- 宽度：400px（移动端全屏）

**内容（4个规则项）**：
1. **🖱️ 基本操作**：左键翻开，右键插旗
2. **🎯 游戏目标**：找出所有安全方块
3. **#️⃣ 数字含义**：周围地雷数量
4. **🚩 标记地雷**：标记疑似位置

**关闭方式**：
- 点击右上角×按钮
- 点击侧边栏外部

### 游戏结束弹窗

**失败弹窗**：
- 图标：💣（粉红圆形背景）
- 标题："游戏结束！"
- 信息："不幸踩到地雷了"
- 用时显示
- "再玩一次"按钮

**胜利弹窗**：
- 图标：🏆（黄粉圆形背景）
- 标题："恭喜获胜！"
- 信息："成功找出所有地雷！"
- 用时显示
- "再玩一次"按钮

## 🎨 视觉效果

### 配色方案
- **主色调**：紫色（#667eea）
- **次色调**：深紫（#764ba2）
- **成功色**：蓝色（#4facfe）
- **警告色**：黄粉渐变
- **失败色**：粉红渐变
- **背景**：紫色渐变（全屏）
- **卡片**：白色（rgba 0.95）

### 动画效果

1. **悬停动画**：
   - 卡片上浮（-5px）
   - 按钮上浮（-3px）
   - 阴影增强

2. **地雷爆炸**（explode）：
   - 缩放效果（1 → 1.2 → 1）
   - 0.5秒动画

3. **弹窗动画**（modalSlideIn）：
   - 从上方滑入
   - 透明度 + 缩放
   - 0.4秒

4. **侧边栏动画**：
   - 从左侧滑入
   - 0.4秒贝塞尔曲线

### 特殊效果
- 毛玻璃背景（backdrop-filter blur）
- 圆角设计（20px）
- 多层阴影
- 平滑过渡（0.3s cubic-bezier）

## 📱 响应式支持

### 桌面（> 768px）
- 方块：45×45px
- 统计面板：3列自适应
- 难度按钮：横向排列

### 移动端（≤ 768px）
- 方块：35×35px
- 统计面板：单列
- 难度按钮：垂直排列，全宽
- 控制按钮：垂直排列，全宽
- 规则侧边栏：全屏宽度

## 🚀 快速开始

### 运行游戏
1. 在浏览器中打开 `index.html`
2. 选择难度（默认简单）
3. 点击任意方块开始游戏
4. 使用左键翻开，右键标记地雷！

### 浏览器要求
- ✅ 支持 ES6 JavaScript
- ✅ 支持 CSS Grid
- ✅ 支持 CSS 自定义属性
- ✅ Chrome / Edge / Firefox / Safari

## 💡 游戏技巧

### 新手策略

1. **从角落开始**：
   - 角落方块只有3个相邻
   - 推理更简单
   - 风险相对较低

2. **看数字推理**：
   - 仔细观察数字
   - 数字 = 周围地雷数
   - 通过数字确定安全位置

3. **不要乱猜**：
   - 确定安全时才点击
   - 多用推理，少靠运气
   - 标记可疑位置

4. **善用标记**：
   - 确定是地雷就标记
   - 帮助记忆和推理
   - 避免误点

### 进阶技巧

**开局策略**：
- 第一次点击选择中间或角落
- 首次点击区域会安全展开
- 获得更多初始信息

**边缘推理**：
- 边缘方块最多5个相邻
- 角落方块最多3个相邻
- 推理难度降低

**数字组合**：
- 1-2-1模式识别
- 1-2-2-1模式识别
- 多个数字联合推理

**概率思维**：
- 无法确定时考虑概率
- 选择地雷概率低的方块
- 避免50-50的猜测

**快速扫描**：
- 快速扫描棋盘
- 找出确定的地雷和安全方块
- 优先处理确定位置

## 🏆 挑战目标

### 完成挑战
- 🥉 **新手**：完成简单难度
- 🥈 **熟练**：完成中等难度
- 🥇 **高手**：完成困难难度

### 速度挑战
- ⚡ **简单**：< 60秒
- ⚡ **中等**：< 180秒
- ⚡ **困难**：< 360秒

### 高级挑战
- 🏆 简单难度无标记完成
- 🏆 中等难度 < 120秒
- 🏆 困难难度 < 240秒
- 💎 困难难度无标记完成

## 🔧 技术细节

### 首次点击保护

```javascript
function setMines(excludeId) {
  const excludedTiles = new Set();
  
  // 排除点击位置及周围3×3区域
  if (excludeId) {
    const [r, c] = excludeId.split("-").map(Number);
    
    for (let dr = -1; dr <= 1; dr++) {
      for (let dc = -1; dc <= 1; dc++) {
        const newR = r + dr;
        const newC = c + dc;
        if (有效位置) {
          excludedTiles.add(`${newR}-${newC}`);
        }
      }
    }
  }
  
  // 随机放置地雷，避开排除区域
  while (minesLeft > 0) {
    const id = `${randomR}-${randomC}`;
    if (!excludedTiles.has(id)) {
      minesLocation.push(id);
      minesLeft--;
    }
  }
}
```

### 递归展开空白区域

```javascript
function revealTile(r, c) {
  if (越界 || 已点击 || 已标记) return;
  
  tile.classList.add("tile-clicked");
  const minesFound = countAdjacentMines(r, c);
  
  if (minesFound > 0) {
    // 显示数字
    tile.textContent = minesFound;
    tile.classList.add(`x${minesFound}`);
  } else {
    // 递归展开8个方向
    revealTile(r - 1, c - 1); // 左上
    revealTile(r - 1, c);     // 上
    revealTile(r - 1, c + 1); // 右上
    revealTile(r, c - 1);     // 左
    revealTile(r, c + 1);     // 右
    revealTile(r + 1, c - 1); // 左下
    revealTile(r + 1, c);     // 下
    revealTile(r + 1, c + 1); // 右下
  }
}
```

### 周围地雷计数

```javascript
function countAdjacentMines(r, c) {
  let count = 0;
  const directions = [
    [-1, -1], [-1, 0], [-1, 1],
    [0, -1],           [0, 1],
    [1, -1],  [1, 0],  [1, 1]
  ];
  
  for (const [dr, dc] of directions) {
    const newR = r + dr;
    const newC = c + dc;
    if (有效位置 && minesLocation.includes(`${newR}-${newC}`)) {
      count++;
    }
  }
  
  return count;
}
```

### 胜利判定

```javascript
// 已点击方块数 = 总方块数 - 地雷数
if (tilesClicked === rows * columns - minesCount) {
  gameOver(true); // 胜利
}
```

## 🐛 反馈与支持

### 常见问题

**Q: 第一次点击会踩到地雷吗？**  
A: 不会！第一次点击及其周围3×3区域都不会有地雷。

**Q: 如何插旗？**  
A: 桌面端右键点击，移动端开启标记模式后点击。

**Q: 数字是什么意思？**  
A: 数字表示周围8个方块中的地雷数量。

**Q: 空白方块为什么自动展开？**  
A: 空白表示周围无地雷，自动展开帮助快速推进游戏。

**Q: 可以取消标记吗？**  
A: 可以，再次右键点击（或标记模式点击）即可取消。

**Q: 标记过多会怎样？**  
A: 剩余地雷数可能显示负数，但不影响游戏。

**Q: 如何切换难度？**  
A: 点击难度按钮后会自动重新开始游戏。

**Q: 标记模式有什么用？**  
A: 方便移动端操作，无需长按或右键。

**Q: 计时什么时候开始？**  
A: 从第一次点击方块开始计时。

**Q: 如何获得高分？**  
A: 用最短时间完成游戏即为高分。

### 已知限制
- 无最佳成绩记录
- 无撤销功能
- 无自动求解器
- 无自定义难度

### 性能优化建议
- 使用现代浏览器
- 游戏轻量级，无特殊要求

### 未来改进方向
- 💾 本地最佳成绩保存
- ⏮️ 撤销上一步操作
- 🤖 智能提示系统
- 🎨 自定义难度和棋盘大小
- 🏅 成就系统
- 📊 详细统计图表
- 🎯 每日挑战
- 👥 多人竞速模式
- 🔊 音效和音乐
- 🎨 主题切换

---

**准备好挑战扫雷了吗？开始游戏吧！** 💣🎯✨
