# 9️⃣ Sudoku | 数独

挑战你的逻辑思维能力！

## 📖 游戏简介

Sudoku（数独）是一款经典的数字逻辑游戏。玩家需要在9×9的网格中填入数字1-9，使得每一行、每一列以及每个3×3的宫格内都包含1-9这9个数字，且不重复。游戏使用回溯算法生成完整的数独解答，然后根据难度挖空部分数字，确保每个数独都有唯一解。支持提示、撤销功能和实时检查，是锻炼逻辑思维的绝佳选择！

### 游戏特色
- **三种难度**：简单（40个空格）、中等（50个空格）、困难（60个空格）
- **回溯算法生成**：确保每个数独都有唯一解
- **智能高亮**：选中格子自动高亮同行、同列、同宫格
- **提示系统**：3次提示机会，随机填充正确答案
- **撤销功能**：支持无限次撤销操作
- **检查功能**：验证当前答案是否正确
- **键盘支持**：数字键输入，方向键移动
- **数字选择器**：点击数字按钮填入，支持擦除
- **持续挑战**：游戏不会失败，可一直尝试直到成功

## 🎮 游戏玩法

### 基本操作

**点击操作**：
1. 点击空格子选中（蓝色高亮）
2. 点击下方数字按钮（1-9）填入
3. 点击"🗑️ 擦除"按钮清空当前格子

**键盘操作**：
- **数字键1-9**：在选中格子填入数字
- **Backspace/Delete/0**：擦除当前格子
- **方向键**：移动选择（⬆️⬇️⬅️➡️）
- 方向键移动时自动跳过固定格子

**控制按钮**：
- **🎮 新游戏**：选择难度开始新游戏
- **💡 提示(3)**：使用提示填充一个空格（限3次）
- **↩️ 撤销**：撤销上一步操作
- **✅ 检查**：检查当前答案是否完全正确

### 游戏规则

#### 数独基本规则

**填充目标**：
- 在9×9网格的空格中填入数字1-9

**三个约束条件**：
1. **每一行**：包含数字1-9，不重复
2. **每一列**：包含数字1-9，不重复
3. **每个3×3宫格**：包含数字1-9，不重复

**胜利条件**：
- 所有空格都填入数字
- 所有数字都符合三个约束条件
- 点击"检查"按钮验证通过

#### 三种难度

**😊 简单（Easy）**：
- 空格数量：40个
- 初始数字：41个
- 适合：新手玩家，容易推理

**😐 中等（Medium）**：
- 空格数量：50个
- 初始数字：31个
- 适合：普通玩家，需要一定技巧

**😰 困难（Hard）**：
- 空格数量：60个
- 初始数字：21个
- 适合：高级玩家，需要高级技巧

#### 格子状态

**固定格子**（灰色背景）：
- 游戏初始给定的数字
- 无法修改或擦除
- 点击不会选中

**空格子**（白色背景）：
- 需要玩家填入数字
- 可以修改和擦除
- 点击选中

**选中格子**（蓝色高亮）：
- 当前选中的格子
- 蓝色内边框
- 可以输入数字

**高亮格子**（黄色背景）：
- 与选中格子同行、同列或同宫格
- 辅助观察相关约束

**提示格子**（绿色闪烁）：
- 使用提示功能填入的格子
- 绿色高亮1秒后恢复

#### 检查机制

**检查行为**：
- 点击"✅ 检查"按钮
- 验证所有格子是否正确

**检查结果**：
- **全部正确**：显示"🎉 完全正确！"，游戏胜利
- **未全对**：显示"❌ 还未全部正确"，增加检查错误次数
- **游戏不会失败**：可以继续尝试直到成功

**错误统计**：
- "检查错误"显示累计检查次数
- 每次检查未全对时+1
- 不影响游戏进程

### 提示系统

**提示机制**：
- 每局游戏：3次提示机会
- 随机选择一个空格
- 自动填入正确答案
- 使用后减少提示次数

**提示效果**：
- 选中并填入正确数字
- 格子短暂绿色高亮（1秒）
- 显示剩余提示次数

**提示限制**：
- 提示用完后按钮禁用
- 无法恢复提示次数
- 新游戏重置为3次

### 撤销功能

**撤销机制**：
- 记录每次填入/擦除操作
- 点击"撤销"按钮恢复上一步
- 支持无限次撤销
- 撤销到游戏开始状态

**撤销效果**：
- 恢复格子的前一个值
- 自动选中该格子
- 无操作历史时按钮禁用

### 统计系统

**⏱️ 时间**：
- 格式：MM:SS
- 从游戏开始计时
- 每秒更新
- 游戏结束后停止

**🔍 检查错误**：
- 累计检查未全对的次数
- 初始为0
- 每次检查失败+1
- 不影响游戏胜利

**📊 难度**：
- 当前游戏难度
- 简单/中等/困难

## 🖥️ 界面说明

### 游戏头部
- **标题**："9️⃣ Sudoku"（紫色渐变）
- **副标题**："数独 - 挑战你的逻辑思维能力"

### 信息栏（3项）

1. **⏱️ 时间**：
   - 游戏用时（MM:SS）
   - 实时更新

2. **🔍 检查错误**：
   - 累计检查失败次数
   - 初始为0

3. **📊 难度**：
   - 当前难度名称
   - 简单/中等/困难

### 数独网格

**整体布局**：
- 9×9网格（81个格子）
- 深色边框分隔
- 3×3宫格粗边框

**格子样式**：
- 尺寸：正方形，自适应
- 字体：1.5rem，加粗
- 固定格子：灰色背景
- 空格子：白色背景

**交互效果**：
- 悬停：黄色背景 + 放大1.05倍
- 选中：蓝色边框（3px内边框）
- 高亮：黄色背景（同行列宫格）

### 数字选择器

**布局**：5×2网格（10个按钮）

**数字按钮**（1-9）：
- 正方形按钮
- 大号数字（1.5rem）
- 点击填入选中格子

**擦除按钮**：
- 图标：🗑️
- 文字："擦除"
- 清空选中格子

**按钮状态**：
- 默认：白色背景
- 悬停：紫色渐变背景
- 选中：紫色渐变背景
- 点击：轻微下沉

### 控制按钮（4个，2×2布局）

1. **🎮 新游戏**：
   - 打开难度选择对话框
   - 紫色渐变背景

2. **💡 提示(3)**：
   - 显示剩余提示次数
   - 用完后禁用
   - 紫色渐变背景

3. **↩️ 撤销**：
   - 撤销上一步操作
   - 无历史时禁用
   - 紫色渐变背景

4. **✅ 检查**：
   - 验证答案正确性
   - 紫色渐变背景

### 游戏说明

**📖 游戏规则**（6条）：
1. 在空白格子中填入数字1-9
2. 每行、每列、每个3x3宫格内数字不能重复
3. 点击格子选中，然后点击下方数字填入
4. 点击"检查"按钮验证答案，全部正确即游戏胜利
5. 提示功能限制3次，用完后无法再使用
6. 游戏不会因错误而失败，可以一直尝试直到成功

### 难度选择对话框

**显示时机**：
- 游戏加载时
- 点击"新游戏"按钮

**3个难度按钮**（垂直排列）：
- **😊 简单**：40个空格
- **😐 中等**：50个空格
- **😰 困难**：60个空格

**按钮样式**：
- 白色背景 + 边框
- 左侧表情图标
- 右侧难度名称 + 描述
- 悬停：蓝色背景 + 右移5px

### 游戏结束对话框

**显示时机**：检查通过后

**内容**：
- 图标：🎉（弹跳动画）
- 标题："恭喜完成！数独胜利！"
- 统计信息：
  - 用时：MM:SS
  - 检查错误：次数
- "再玩一次"按钮（紫色）

## 🎨 视觉效果

### 配色方案
- **主色调**：紫色（#6366f1）
- **次色调**：深紫（#8b5cf6）
- **成功色**：绿色（#10b981）
- **错误色**：红色（#ef4444）
- **背景渐变**：紫色 → 深紫
- **格子固定**：浅灰（#f1f5f9）
- **格子选中**：浅蓝（#dbeafe）
- **格子高亮**：浅黄（#fef3c7）

### 动画效果

1. **抖动动画**（shake）：错误格子
   - 左右摇摆
   - 0.4秒

2. **脉冲动画**（pulse）：正确格子
   - 缩放效果（1 → 1.1 → 1）
   - 0.4秒

3. **弹跳动画**（bounceIn）：游戏结束图标
   - 缩放效果（0 → 1.1 → 1）
   - 0.6秒

4. **渐入动画**（fadeInUp）：游戏容器
   - 透明度 + 上移
   - 0.5秒

5. **滑入动画**（slideUp）：对话框
   - 透明度 + 上移
   - 0.3秒

### 特殊效果
- 3×3宫格粗边框
- 格子悬停放大
- 数字按钮渐变
- 对话框模糊背景

## 📱 响应式支持

### 桌面（> 600px）
- 数独网格：最大450px
- 数字按钮：正方形
- 控制按钮：显示图标+文字

### 平板/手机（≤ 600px）
- 信息栏：间距缩小
- 数独格子：字体1.2rem
- 数字按钮：字体1.3rem
- 控制按钮：仅显示图标

### 小手机（≤ 400px）
- 数独格子：字体1rem
- 数字按钮：字体1.1rem
- 数字选择器：5列布局

## 🚀 快速开始

### 运行游戏
1. 在浏览器中打开 `index.html`
2. 选择难度（简单/中等/困难）
3. 点击空格子，使用数字按钮或键盘填入数字
4. 完成后点击"检查"验证答案！

### 浏览器要求
- ✅ 支持 ES6 JavaScript
- ✅ 支持 CSS Grid
- ✅ 支持 CSS 自定义属性
- ✅ Chrome / Edge / Firefox / Safari

## 💡 游戏技巧

### 基础技巧

1. **唯一候选法**：
   - 如果某格子只能填一个数字
   - 根据行、列、宫格排除其他数字
   - 直接填入唯一候选数字

2. **隐性唯一法**：
   - 如果某数字在某行/列/宫格只能填一个位置
   - 即使该位置有多个候选数字
   - 也可以确定填入该数字

3. **数字扫描**：
   - 选择一个数字（如1）
   - 在整个棋盘上寻找该数字的位置
   - 利用已知数字排除位置

4. **利用高亮**：
   - 选中格子自动高亮同行列宫格
   - 快速观察相关约束
   - 找出可填入的数字

### 进阶技巧

**区块排除法**：
- 利用宫格内数字的位置
- 排除同行/列其他宫格的可能性
- 缩小候选数字范围

**候选数字标记**（建议用纸笔）：
- 在每个空格标记可能的数字
- 随着填入新数字更新候选数字
- 更容易发现唯一候选数字

**从已知多的区域开始**：
- 先填数字较多的行/列/宫格
- 约束更多，更容易推理
- 逐步扩展到其他区域

**使用提示的策略**：
- 简单难度：保守使用，锻炼推理
- 中等难度：卡住时使用
- 困难难度：珍惜3次机会

**撤销的作用**：
- 尝试性填入数字
- 发现矛盾后撤销
- 探索不同的解题路径

### 常见模式

**单行/列/宫格排除**：
- 某行已有8个数字
- 剩余1个格子只能填缺失的数字

**双数排除**：
- 两个格子只能填相同的两个数字
- 这两个数字不会出现在其他格子

**三数排除**：
- 三个格子只能填相同的三个数字
- 这三个数字不会出现在其他格子

## 🏆 挑战目标

### 完成挑战
- 🥉 **新手**：完成简单难度
- 🥈 **熟练**：完成中等难度
- 🥇 **高手**：完成困难难度

### 速度挑战
- ⚡ **简单**：< 5分钟
- ⚡ **中等**：< 10分钟
- ⚡ **困难**：< 20分钟

### 完美挑战
- 🏆 简单难度不使用提示
- 🏆 中等难度不使用提示
- 🏆 困难难度不使用提示
- 💎 困难难度 < 15分钟且0次检查错误

## 🔧 技术细节

### 数独生成算法

**步骤1：生成完整解答**
```javascript
function generateCompleteSudoku() {
  const grid = Array(9).fill(0).map(() => Array(9).fill(0));
  fillSudoku(grid); // 使用回溯法
  return grid;
}
```

**步骤2：回溯填充**
```javascript
function fillSudoku(grid) {
  const emptyCell = findEmptyCell(grid);
  if (!emptyCell) return true; // 完成
  
  const [row, col] = emptyCell;
  const numbers = shuffleArray([1, 2, 3, 4, 5, 6, 7, 8, 9]);
  
  for (const num of numbers) {
    if (isValidMove(grid, row, col, num)) {
      grid[row][col] = num;
      if (fillSudoku(grid)) return true;
      grid[row][col] = 0; // 回溯
    }
  }
  
  return false;
}
```

**步骤3：挖空创建谜题**
```javascript
function createPuzzle(emptyCells) {
  // 随机选择emptyCells个格子
  // 将其值设为0（空格）
  // 其余格子标记为固定
}
```

### 有效性检查

**检查行**：
```javascript
for (let c = 0; c < 9; c++) {
  if (grid[row][c] === num) return false;
}
```

**检查列**：
```javascript
for (let r = 0; r < 9; r++) {
  if (grid[r][col] === num) return false;
}
```

**检查3×3宫格**：
```javascript
const boxRow = Math.floor(row / 3) * 3;
const boxCol = Math.floor(col / 3) * 3;

for (let r = boxRow; r < boxRow + 3; r++) {
  for (let c = boxCol; c < boxCol + 3; c++) {
    if (grid[r][c] === num) return false;
  }
}
```

### 高亮逻辑

```javascript
function highlightRelatedCells(row, col) {
  // 高亮同行
  for (let i = 0; i < 9; i++) {
    highlightCell(row, i);
  }
  
  // 高亮同列
  for (let i = 0; i < 9; i++) {
    highlightCell(i, col);
  }
  
  // 高亮同宫格
  const boxRow = Math.floor(row / 3) * 3;
  const boxCol = Math.floor(col / 3) * 3;
  for (let r = boxRow; r < boxRow + 3; r++) {
    for (let c = boxCol; c < boxCol + 3; c++) {
      highlightCell(r, c);
    }
  }
}
```

## 🐛 反馈与支持

### 常见问题

**Q: 数独一定有解吗？**  
A: 是的，游戏使用回溯算法生成完整解答，保证有唯一解。

**Q: 如何填入数字？**  
A: 点击空格子选中，然后点击数字按钮或按键盘数字键。

**Q: 固定格子可以修改吗？**  
A: 不可以，灰色背景的固定格子是初始数字，无法修改。

**Q: 提示会填入错误数字吗？**  
A: 不会，提示功能会填入正确答案。

**Q: 提示次数可以恢复吗？**  
A: 不可以，每局游戏固定3次，用完就没有了。

**Q: 检查失败会游戏结束吗？**  
A: 不会，游戏不会失败，可以一直尝试直到成功。

**Q: 撤销有次数限制吗？**  
A: 没有，可以无限次撤销到游戏开始状态。

**Q: 如何知道数字填错了？**  
A: 点击"检查"按钮会告诉你是否全部正确。

**Q: 键盘方向键有什么用？**  
A: 可以移动选中的格子，自动跳过固定格子。

**Q: 为什么选中格子周围会变黄色？**  
A: 自动高亮同行、同列、同宫格，帮助观察约束。

### 已知限制
- 无候选数字标记功能
- 无自动检查冲突
- 无难度统计
- 无成绩保存

### 性能优化建议
- 使用现代浏览器
- 回溯算法生成可能需要几秒

### 未来改进方向
- 💡 候选数字标记功能
- 🔍 实时冲突检测
- 📊 详细统计和成绩记录
- 🏅 成就系统
- 🎨 更多主题和颜色
- 📱 更好的移动端支持
- 💾 进度保存
- 🎯 每日挑战
- 👥 排行榜
- 📖 互动教程

---

**准备好挑战数独了吗？开始游戏吧！** 9️⃣🧠✨
