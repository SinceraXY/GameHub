# Tilting Maze - 倾斜迷宫

一款基于物理引擎的平衡控制游戏。通过操控摇杆倾斜迷宫板，利用重力和摩擦力引导小球滚动到中心目标区域，同时避开墙壁障碍（困难模式下还需躲避黑洞陷阱）。游戏采用真实的物理模拟，包括重力加速度、摩擦力衰减、墙壁碰撞反弹等机制。

---

## 🎮 游戏简介

**Tilting Maze** 是一款考验平衡感和手眼协调的益智游戏。玩家需要通过精确控制迷宫的倾斜角度，让 4 个红色小球从四个角落同时滚向中心的目标圆圈。游戏模拟了真实的物理运动，包括重力作用、摩擦力、速度限制以及墙壁碰撞的反弹效果。

### 核心特色
- **真实物理引擎**：模拟重力加速度（2 单位）、摩擦系数（0.01）和速度上限（1.5 单位/帧）
- **双难度模式**：简单模式仅需避开墙壁，困难模式额外包含 8 个旋转黑洞
- **精确碰撞检测**：支持墙壁主体碰撞和墙壁端点的圆角滚动物理
- **3D 视觉效果**：迷宫板根据摇杆倾斜产生 3D 旋转透视（最大旋转角度 ±12°）
- **四球联动**：同时控制 4 个小球，需要兼顾多个物体的运动轨迹

---

## 🕹️ 游戏玩法

### 游戏目标
将 **4 个红色小球**全部移动到迷宫中心的**紫色虚线圆圈**（直径 65px）内即可获胜。

### 操作方式

#### 摇杆控制
- **拖动摇杆**：点击并按住红色摇杆头，向任意方向拖动（最大拖动范围 ±15px）
- **迷宫倾斜**：摇杆移动会实时改变迷宫板的倾斜角度，产生重力分量
  - 向左拖动 → 迷宫向左倾斜 → 小球向左滚动
  - 向上拖动 → 迷宫向上倾斜 → 小球向上滚动
  - 对角线拖动 → 迷宫对角倾斜 → 小球沿对角线滚动

#### 键盘快捷键
- **H 键**：切换至困难模式（Hard Mode），迷宫中会出现 8 个黑色旋转黑洞
- **E 键**：切换至简单模式（Easy Mode），移除所有黑洞
- **Space 空格键**：重新开始游戏，重置所有小球位置和迷宫角度

### 游戏模式

#### 🟢 简单模式（默认）
- **障碍物**：仅包含迷宫墙壁
- **失败条件**：无（可以无限次重试）
- **策略提示**：
  - 小幅度倾斜，避免小球速度过快失控
  - 利用墙壁碰撞减速（碰撞后速度减少为 1/3）
  - 优先引导距离中心最远的球

#### 🔴 困难模式（按 H 键）
- **额外障碍**：8 个黑洞分布在迷宫路径上（18px 直径）
- **黑洞位置**：
  - 左上区域：(0,5), (2,0), (2,4)
  - 中间区域：(4,6), (6,2)
  - 右下区域：(6,8), (8,1), (8,2)
- **失败条件**：任意一个小球碰触黑洞中心（距离 ≤9px）立即失败
- **黑洞特效**：持续旋转动画（4 秒一周），黑洞被触发后会变为红色
- **策略提示**：
  - 规划路线，避开黑洞密集区域
  - 利用墙壁作为"导轨"，控制小球路径
  - 如果一个球已接近目标，可专注引导剩余的球

### 物理机制详解

#### 重力系统
- **倾斜角度**：鼠标拖动距离 × 0.8 = 旋转角度（最大 ±12°）
- **重力加速度**：`gravity × sin(倾斜角度) = 2 × sin(θ)`
- **每帧速度变化**：`速度 += 加速度 × 时间系数`（时间系数 = 实际间隔 / 16ms）

#### 摩擦力系统
- **摩擦力公式**：`friction = gravity × cos(倾斜角度) × 0.01`
- **作用效果**：
  - 迷宫倾斜时：摩擦力与加速度方向相反
  - 迷宫平放时：摩擦力仅减速，不会反向（符合真实物理）

#### 碰撞检测
- **墙壁主体碰撞**：小球穿过墙壁中心线时触发，速度反向并衰减为 1/3
- **墙壁端点碰撞**：小球碰到墙壁圆角端点时，按照几何关系滚动绕过
- **速度上限**：X 和 Y 方向速度均限制在 ±1.5 单位

---

## 🖼️ 界面说明

### 游戏界面布局

```
┌────────────────────────────────────────────┐
│          🎯 Tilting Maze                   │
│      Balance the balls to the center       │
├────────────────────────────────────────────┤
│                                            │
│   ┌─────────────────┐      ┌──────────┐   │
│   │                 │      │          │   │
│   │   🔴        🔴  │      │  摇杆    │   │
│   │                 │      │   控制   │   │
│   │      ⭕️ 目标   │      │    器    │   │
│   │                 │      │          │   │
│   │   🔴        🔴  │      │          │   │
│   │   迷宫板        │      │ 说明文字 │   │
│   └─────────────────┘      └──────────┘   │
│                                            │
└────────────────────────────────────────────┘
```

### 界面元素详解

#### 1. 游戏标题区
- **主标题**：Tilting Maze（白色，2.5rem，带圆形图标）
- **副标题**：Balance the balls to the center（白色半透明）
- **背景**：紫色渐变 + 毛玻璃效果（backdrop-filter: blur(10px)）

#### 2. 迷宫板（350×315px）
- **背景色**：米色（#f5f1ee）
- **圆角**：12px
- **阴影**：内阴影模拟深度感
- **3D 效果**：根据摇杆拖动实时旋转（rotateY 和 rotateX）

#### 3. 目标圆圈
- **样式**：紫色虚线边框（4px，#4834df）
- **尺寸**：直径 65px
- **动画**：脉动效果（2 秒周期，边框颜色和透明度变化）
- **位置**：迷宫正中心（175px, 157.5px）

#### 4. 小球（×4）
- **颜色**：红色渐变（#ff8787 → #ff6b6b）
- **尺寸**：直径 10px
- **光影**：径向渐变 + 内外阴影模拟 3D 球体
- **初始位置**：
  - 左上角：(17.5, 17.5)
  - 右上角：(332.5, 17.5)
  - 左下角：(17.5, 297.5)
  - 右下角：(332.5, 297.5)

#### 5. 墙壁
- **颜色**：深灰色渐变（#2d3436 → #1e272e）
- **宽度**：10px
- **端点**：圆形端点（直径 10px），带径向渐变和阴影
- **数量**：88 段墙壁（包括边界和内部迷宫）
- **布局**：10×9 网格，每格 35px（25px 路径 + 10px 墙壁）

#### 6. 摇杆控制器
- **基座**：深灰色圆形（60px），金属质感渐变
- **摇杆头**：红色圆形（26px），发光动画效果
  - 动画：1.5 秒周期，缩放 1.0 → 1.15，延迟 2 秒启动
  - 拖动时：动画停止，光标变为 grabbing
- **方向箭头**：四个三角形箭头指示可拖动方向
- **位置**：迷宫板右侧，垂直居中

#### 7. 黑洞（仅困难模式）
- **颜色**：黑色径向渐变（#000000 → #1a1a1a → #000000）
- **尺寸**：直径 18px
- **动画**：持续旋转（4 秒一周）
- **特效**：外发光（黑色阴影 12px） + 内发光（白色半透明 8px）
- **触发状态**：球掉入后，黑洞背景色变为红色

#### 8. 说明文字区
- **初始提示**：
  ```
  Click the joystick to start!
  Move every ball to the center circle.
  Ready for hard mode? Press H
  Press Space to restart
  ```
- **胜利提示**：
  ```
  🎉 Congratulations!
  You successfully completed the maze!
  [简单模式: Ready for a challenge? Press H for hard mode!]
  [困难模式: You mastered the hard mode! 🏆]
  Press Space to play again
  ```
- **失败提示**（仅困难模式）：
  ```
  💥 Game Over!
  A ball fell into a black hole!
  Too hard? Press E for easy mode
  Press Space to try again
  ```

### 响应式设计
- **桌面端（>768px）**：迷宫板和控制器并排显示
- **移动端（≤768px）**：迷宫板、摇杆、说明文字垂直排列

---

## 📝 反馈与支持

### 游戏技巧
1. **初学者建议**：
   - 从简单模式开始，熟悉物理特性
   - 保持小幅度倾斜，避免速度过快
   - 利用墙壁碰撞主动减速

2. **进阶策略**：
   - 预判小球轨迹，提前调整倾斜方向
   - 困难模式中，记住黑洞位置并规划路线
   - 利用对角线倾斜同时控制多个方向的球

3. **物理特性利用**：
   - 墙壁碰撞会将速度减为 1/3，可用于急停
   - 摩擦力在大倾斜角度下较小，放平时摩擦力最大
   - 墙角可以作为"导轨"引导小球转向

### 常见问题

**Q: 为什么小球会突然加速失控？**  
A: 倾斜角度越大，重力加速度越大。建议小幅度拖动摇杆，保持角度在 5° 以内。

**Q: 困难模式的黑洞如何避开？**  
A: 黑洞位置固定，可以先在简单模式熟悉迷宫布局，然后规划安全路线。利用墙壁作为屏障，避免小球进入黑洞区域。

**Q: 如何让所有球同时到达中心？**  
A: 优先引导距离中心最远的球，让已接近中心的球在目标区域内缓慢移动，最后微调角度集中所有球。

**Q: 摇杆控制不精确怎么办？**  
A: 摇杆拖动范围被限制在 ±15px，倾斜角度范围为 ±12°。可以通过多次小幅度调整来精确控制，而不是一次大幅度拖动。

### 联系我们
如遇到游戏 Bug、有改进建议或想分享游戏心得，欢迎通过以下方式联系：
- **Issues**：在项目仓库提交问题报告
- **功能建议**：欢迎提出新难度模式、新迷宫布局等创意
- **技术讨论**：物理引擎参数调优、碰撞算法改进等

---

## 🎯 游戏信息

- **游戏类型**：益智 / 平衡控制 / 物理模拟
- **难度等级**：简单模式 ★★☆☆☆ / 困难模式 ★★★★☆
- **平均游戏时长**：2-5 分钟/局
- **技术栈**：原生 JavaScript + CSS3 动画 + HTML5
- **物理引擎**：自研轻量级 2D 物理系统
- **浏览器兼容性**：Chrome 90+, Firefox 88+, Safari 14+, Edge 90+

---

**准备好挑战你的平衡感了吗？点击摇杆，开始游戏！** 🎮
